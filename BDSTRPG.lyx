#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass article
\begin_preamble
\date{}

% cleveref allows \ref{thm:asdf} instead of Theorem~\ref{thm:asdf}
\usepackage[nameinlink,capitalise,noabbrev]{cleveref}
\AtBeginDocument{\renewcommand{\ref}[1]{\cref{#1}}}

\usepackage[parfill]{parskip}
\setlength{\parskip}{\bigskipamount}

%have space before theorems
\begingroup
    \makeatletter
    \@for\theoremstyle:=definition,remark,plain\do{%
        \expandafter\g@addto@macro\csname th@\theoremstyle\endcsname{%
            \addtolength\thm@preskip\parskip
            }%
        }
\endgroup

% LyX won't let me include cleveref before theorem declarations so I need to redefine everything as a hack
\theoremstyle{plain}
\newtheorem{mythm}{\protect\theoremname}
\renewenvironment{thm}{\begin{mythm}}{\end{mythm}}
\crefname{mythm}{Theorem}{Theorems}
\theoremstyle{definition}
\newtheorem{mydefn}[mythm]{\protect\definitionname}
\renewenvironment{defn}{\begin{mydefn}}{\end{mydefn}}
\theoremstyle{definition}
\newtheorem{myexample}[mythm]{\protect\examplename}
\renewenvironment{example}{\begin{myexample}}{\end{myexample}}
\theoremstyle{plain}
\newtheorem{myprop}[mythm]{\protect\propositionname}
\renewenvironment{prop}{\begin{myprop}}{\end{myprop}}
\theoremstyle{plain}
\newtheorem{mycor}[mythm]{\protect\corollaryname}
\renewenvironment{cor}{\begin{mycor}}{\end{mycor}}
\theoremstyle{plain}
\newtheorem{mylem}[mythm]{\protect\lemmaname}
\renewenvironment{lem}{\begin{mylem}}{\end{mylem}}
\crefname{mylem}{Lemma}{Lemmas}
\theoremstyle{plain}
\newtheorem{myconjecture}[mythm]{\protect\conjecturename}
\renewenvironment{conjecture}{\begin{myconjecture}}{\end{myconjecture}}
\theoremstyle{remark}
\newtheorem{myrem}[mythm]{\protect\remarkname}
\renewenvironment{rem}{\begin{myrem}}{\end{myrem}}
\theoremstyle{remark}
\newtheorem{myclaim}[mythm]{\protect\claimname}
\renewenvironment{claim}{\begin{myclaim}}{\end{myclaim}}

% equation cref format
\crefformat{equation}{#2(#1)#3}

% \left(\right) should behave the same as ()
\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright}
\usepackage{pgfplots}
\usetikzlibrary{pgfplots.groupplots}
\usepackage{verbatim}

%make sure tildes in url are vertically centered
\makeatletter
\renewcommand*{\UrlTildeSpecial}{%
  \do\~{%
    \mbox{%
      \fontfamily{ptm}\selectfont
      \textasciitilde
    }%
  }%  
}%    
\let\Url@force@Tilde\UrlTildeSpecial
\makeatother

%graph drawing
\usepackage{tikz}
\usetikzlibrary{external}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{arrows.meta}
\tikzexternalize
\tikzstyle{vertex}=[circle,draw=black,fill=black,inner sep=0,minimum size=0.2cm,text=white,font=\footnotesize]
\tikzset{arc/.style={
        decoration={markings,
            mark= at position 0.5 with {\arrow{Latex[length=2mm,width=2mm]}} ,
        },
        postaction={decorate}
    }
}
\tikzset{every loop/.style={min distance=50,in=50,out=130,looseness=7}}

%caption labels
\usepackage[labelfont=bf,labelsep=period]{caption}

\usepackage[nomessages]{fp}

\usepackage{calc}
\end_preamble
\use_default_options true
\begin_modules
theorems-ams
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman cmr
\font_sans cmss
\font_typewriter cmtt
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 11
\spacing other 0.96
\use_hyperref true
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle true
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\branch Folded
\selected 1
\filename_suffix 0
\color #faf0e6
\end_branch
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2.5cm
\topmargin 2.5cm
\rightmargin 2.5cm
\bottommargin 2.5cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip bigskip
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Bounded-degree spanning trees in randomly perturbed graphs
\end_layout

\begin_layout Author
Michael Krivelevich, Matthew Kwan, Benny Sudakov
\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\RR}{\mathbb{R}}
{\boldsymbol{\mathbb{R}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\QQ}{\mathbb{Q}}
{\boldsymbol{\mathbb{Q}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\HH}{\mathbb{H}}
{\boldsymbol{\mathbb{H}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\E}{\mathbb{E}}
{\boldsymbol{\mathbb{E}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Var}{\operatorname{Var}}
{\mathbf{Var}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\CC}{\mathbb{C}}
{\boldsymbol{\mathbb{C}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\NN}{\mathbb{N}}
{\boldsymbol{\mathbb{N}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\ZZ}{\mathbb{Z}}
{\boldsymbol{\mathbb{Z}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\GG}{\mathbb{G}}
{\boldsymbol{\mathbb{G}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\BB}{\mathbb{B}}
{\boldsymbol{\mathbb{B}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\DD}{\mathbb{D}}
{\boldsymbol{\mathbb{D}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\cL}{\mathcal{L}}
{\boldsymbol{\mathcal{L}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\supp}{\operatorname{supp}}
{\mathbf{supp}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\one}{\boldsymbol{1}}
{\boldsymbol{\boldsymbol{1}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\range}[1]{\left[#1\right]}
{\boldsymbol{\left[#1\right]}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\d}{\operatorname{d}}
{\mathbf{d}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\falling}[2]{\left(#1\right)_{#2}}
{\boldsymbol{\left(#1\right)_{#2}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\f}{\mathbf{f}}
{\boldsymbol{\mathbf{f}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\im}{\operatorname{im}}
{\mathbf{im}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\sp}{\operatorname{span}}
{\mathbf{span}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\sign}{\operatorname{sign}}
{\mathbf{sign}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\mod}{\operatorname{mod}}
{\mathbf{mod}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\id}{\operatorname{id}}
{\mathbf{id}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\disc}{\operatorname{disc}}
{\mathbf{disc}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\lindisc}{\operatorname{lindisc}}
{\mathbf{lindisc}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\tr}{\operatorname{tr}}
{\mathbf{tr}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\adj}{\operatorname{adj}}
{\mathbf{adj}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Unif}{\operatorname{Unif}}
{\mathbf{Unif}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Po}{\operatorname{Po}}
{\mathbf{Po}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Bin}{\operatorname{Bin}}
{\mathbf{Bin}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Ber}{\operatorname{Ber}}
{\mathbf{Ber}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Geom}{\operatorname{Geom}}
{\mathbf{Geom}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\Hom}{\operatorname{Hom}}
{\mathbf{Hom}\,}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\floor}[1]{\left\lfloor #1\right\rfloor }
{\boldsymbol{\left\lfloor #1\right\rfloor }}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\ceil}[1]{\left\lceil #1\right\rceil }
{\boldsymbol{\left\lceil #1\right\rceil }}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\flip}[1]{\overline{#1}}
{\boldsymbol{\overline{#1}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\a}{\alpha}
{\boldsymbol{\alpha}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\c}{c}
{\boldsymbol{c}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\D}{\Delta}
{\boldsymbol{\Delta}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\G}{G}
{\boldsymbol{G}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\F}{F}
{\boldsymbol{F}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\T}{T}
{\boldsymbol{T}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\R}{R}
{\boldsymbol{R}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\B}[1]{\Gamma_{A,B}\left(#1\right)}
{\boldsymbol{\Gamma_{A,B}\left(#1\right)}}
\end_inset


\end_layout

\begin_layout Abstract
We show that for any bounded-degree spanning tree 
\begin_inset Formula $T$
\end_inset

 and any fixed dense graph 
\begin_inset Formula $G$
\end_inset

, a modest random perturbation of 
\begin_inset Formula $G$
\end_inset

 will typically contain a copy of 
\begin_inset Formula $T$
\end_inset

.
 This combines the viewpoints of the well-studied problems of embedding
 trees into fixed dense graphs and into random graphs, and extends a sizeable
 body of existing research on randomly perturbed graphs.
 Specifically, we show that there is 
\begin_inset Formula $\c=\c\left(\a,\D\right)$
\end_inset

 such that if 
\begin_inset Formula $\G$
\end_inset

 is an 
\begin_inset Formula $n$
\end_inset

-vertex graph with minimum degree at least 
\begin_inset Formula $\a n$
\end_inset

, and 
\begin_inset Formula $\T$
\end_inset

 is an 
\begin_inset Formula $n$
\end_inset

-vertex tree with maximum degree at most 
\begin_inset Formula $\D$
\end_inset

, then if we add 
\begin_inset Formula $\c n$
\end_inset

 uniformly random edges to 
\begin_inset Formula $\G$
\end_inset

, the resulting graph will contain 
\begin_inset Formula $\T$
\end_inset

 asymptotically almost surely (as 
\begin_inset Formula $n\to\infty$
\end_inset

).
 Our proof depends on a lemma concerning the decomposition of a dense graph
 into super-regular pairs of uneven sizes, which may be of independent interest.
\end_layout

\begin_layout Standard
\begin_inset Branch Folded
status open

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{comment}
\end_layout

\end_inset


\end_layout

\begin_layout Theorem
t
\end_layout

\begin_layout Corollary
c
\end_layout

\begin_layout Lemma
l
\end_layout

\begin_layout Proposition
p
\end_layout

\begin_layout Conjecture
c
\end_layout

\begin_layout Definition
d
\end_layout

\begin_layout Example
e
\end_layout

\begin_layout Remark
r
\end_layout

\begin_layout Claim
c
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{comment}
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
A classical theorem of Dirac 
\begin_inset CommandInset citation
LatexCommand cite
key "Dir52"

\end_inset

 states that any 
\begin_inset Formula $n$
\end_inset

-vertex graph (
\begin_inset Formula $n\ge3$
\end_inset

) with minimum degree at least 
\begin_inset Formula $n/2$
\end_inset

 has a Hamilton cycle: a cycle that passes through all the vertices of the
 graph.
 More recently, there have been many results showing that this kind of minimum
 degree condition is sufficient to guarantee the existence of different
 kinds of spanning graphs.
 For example, 
\begin_inset CommandInset citation
LatexCommand cite
after "Theorem~1$'$"
key "KSS95"

\end_inset

 says that for any 
\begin_inset Formula $\Delta$
\end_inset

 and 
\begin_inset Formula $\gamma>0$
\end_inset

, any 
\begin_inset Formula $n$
\end_inset

-vertex graph (
\begin_inset Formula $n$
\end_inset

 sufficiently large) with minimum degree 
\begin_inset Formula $\left(1/2+\gamma\right)n$
\end_inset

 contains every spanning tree which has maximum degree at most 
\begin_inset Formula $\Delta$
\end_inset

.
 (This has also been generalized further in two directions: to allow 
\begin_inset Formula $\Delta$
\end_inset

 to grow with 
\begin_inset Formula $n$
\end_inset

 and to allow for much more general spanning subgraphs than spanning trees;
 see 
\begin_inset CommandInset citation
LatexCommand cite
key "KSS01,BST09"

\end_inset

).
\end_layout

\begin_layout Standard
The constant 
\begin_inset Quotes eld
\end_inset


\begin_inset Formula $1/2$
\end_inset


\begin_inset Quotes erd
\end_inset

 in the above Dirac-type theorems is tight: in order to guarantee the existence
 of these spanning subgraphs we require very strong density conditions.
 But the situation is very different for a 
\begin_inset Quotes eld
\end_inset

typical
\begin_inset Quotes erd
\end_inset

 large graph.
 If we fix an arbitrarily small 
\begin_inset Formula $\alpha>0$
\end_inset

 and select a graph uniformly at random among the (labelled) graphs with
 
\begin_inset Formula $n$
\end_inset

 vertices and 
\begin_inset Formula $\alpha{n \choose 2}$
\end_inset

 edges, then the degrees will probably each be about 
\begin_inset Formula $\alpha n$
\end_inset

.
 Such a random graph is Hamiltonian with probability 
\begin_inset Formula $1-o\left(1\right)$
\end_inset

 (we say it is Hamiltonian 
\emph on
asymptotically almost surely
\emph default
, or 
\emph on
a.a.s.
\emph default
).
 This follows from a stronger result 
\begin_inset CommandInset citation
LatexCommand cite
key "Pos76"

\end_inset

 that gives a 
\emph on
threshold
\emph default
 for Hamiltonicity: a random 
\begin_inset Formula $n$
\end_inset

-vertex, 
\begin_inset Formula $m$
\end_inset

-edge graph is Hamiltonian a.a.s.
 if 
\begin_inset Formula $m\gg n\log n$
\end_inset

, and fails to be Hamiltonian a.a.s.
 if 
\begin_inset Formula $m\ll n\log n$
\end_inset

.
 Although the exact threshold for bounded-degree spanning trees is not known,
 it was proved in 
\begin_inset CommandInset citation
LatexCommand cite
key "Mon14"

\end_inset

 that for any 
\begin_inset Formula $\Delta$
\end_inset

 and any tree 
\begin_inset Formula $T$
\end_inset

 with maximum degree at most 
\begin_inset Formula $\Delta$
\end_inset

, a random 
\begin_inset Formula $n$
\end_inset

-vertex graph with 
\begin_inset Formula $\Delta n\left(\log n\right)^{5}$
\end_inset

 edges a.a.s.
 contains 
\begin_inset Formula $T$
\end_inset

.
 Here and from now on, all asymptotics are as 
\begin_inset Formula $n\to\infty$
\end_inset

, and we implicitly round large quantities to integers.
\end_layout

\begin_layout Standard
In 
\begin_inset CommandInset citation
LatexCommand cite
key "BFM03"

\end_inset

, the authors studied Hamiltonicity in the random graph model that starts
 with a dense graph and adds 
\begin_inset Formula $m$
\end_inset

 random edges.
 This model is a natural generalization of the ordinary random graph model
 where we start with nothing, and offers a 
\begin_inset Quotes eld
\end_inset

hybrid
\begin_inset Quotes erd
\end_inset

 perspective combining the extremal and probabilistic settings of the last
 two paragraphs.
 The model has since been studied in a number of other contexts; see for
 example 
\begin_inset CommandInset citation
LatexCommand cite
key "BHM04,KST06,KKS15"

\end_inset

.
 A property that holds a.a.s.
 with small 
\begin_inset Formula $m$
\end_inset

 in our random graph model can be said to hold not just for a 
\begin_inset Quotes eld
\end_inset

globally
\begin_inset Quotes erd
\end_inset

 typical graph but for the typical graph in every small 
\begin_inset Quotes eld
\end_inset

neighbourhood
\begin_inset Quotes erd
\end_inset

 of our space of graphs.
 This tells us that the graphs which fail to satisfy our property are in
 some sense 
\begin_inset Quotes eld
\end_inset

fragile
\begin_inset Quotes erd
\end_inset

.
 We highlight that it is generally very easy to transfer results from our
 model of random perturbation to other natural models, including those that
 delete as well as add edges (this can be accomplished with standard coupling
 and conditioning arguments).
 We also note that a particularly important motivation is the notion of
 
\emph on
smoothed analysis
\emph default
 of algorithms introduced in 
\begin_inset CommandInset citation
LatexCommand cite
key "ST04"

\end_inset

.
 This is is a hybrid of worst-case and average-case analysis, studying the
 performance of algorithms in the more realistic setting of inputs that
 are 
\begin_inset Quotes eld
\end_inset

noisy
\begin_inset Quotes erd
\end_inset

 but not completely random.
\end_layout

\begin_layout Standard
The statement of 
\begin_inset CommandInset citation
LatexCommand cite
after "Theorem~1"
key "BFM03"

\end_inset

 is that for every 
\begin_inset Formula $\alpha>0$
\end_inset

 there is 
\begin_inset Formula $c=c\left(\alpha\right)$
\end_inset

 such that if we start with a graph with minimum degree at least 
\begin_inset Formula $\alpha n$
\end_inset

 and add 
\begin_inset Formula $cn$
\end_inset

 random edges, then the resulting graph will a.a.s.
 be Hamiltonian.
 This saves a logarithmic factor over the usual model where we start with
 nothing.
 Note that some dense graphs require a linear number of extra edges to become
 Hamiltonian (consider for example the complete bipartite graph with partition
 sizes 
\begin_inset Formula $n/3$
\end_inset

 and 
\begin_inset Formula $2n/3$
\end_inset

), so the order of magnitude of this result is tight.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\GG\left(n,p\right)$
\end_inset

 be the Erd
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
H{o}
\end_layout

\end_inset

s-R
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

enyi random graph model with vertex set 
\begin_inset Formula $\range n=\left\{ 1,\dots,n\right\} $
\end_inset

, where each edge is independently present with probability 
\begin_inset Formula $p$
\end_inset

.
 (For our purposes this is equivalent to the model that uniformly at random
 selects a 
\begin_inset Formula $p{n \choose 2}$
\end_inset

-edge graph on the vertex set 
\begin_inset Formula $\range n$
\end_inset

).
 In this paper we prove the following theorem, extending the aforementioned
 result to bounded-degree spanning trees.
\end_layout

\begin_layout Theorem
\begin_inset CommandInset label
LatexCommand label
name "thm:main-theorem"

\end_inset

There is 
\begin_inset Formula $\c=\c\left(\a,\D\right)$
\end_inset

 such that if 
\begin_inset Formula $\G$
\end_inset

 is a graph on the vertex set 
\begin_inset Formula $\range n$
\end_inset

 with minimum degree at least 
\begin_inset Formula $\a n$
\end_inset

, and 
\begin_inset Formula $\T$
\end_inset

 is an 
\begin_inset Formula $n$
\end_inset

-vertex tree with maximum degree at most 
\begin_inset Formula $\D$
\end_inset

, and 
\begin_inset Formula $\R\in\GG\left(n,\c/n\right)$
\end_inset

, then a.a.s.
 
\begin_inset Formula $\T\subseteq\G\cup\R$
\end_inset

.
\end_layout

\begin_layout Standard
One of the ingredients of the proof is the following lemma, due to Alon
 and two of the authors (
\begin_inset CommandInset citation
LatexCommand cite
after "Theorem~1.1"
key "AKS07"

\end_inset

).
 It shows that the random edges in 
\begin_inset Formula $\R$
\end_inset

 are already enough to embed almost-spanning trees.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:almost-spanning"

\end_inset

There is 
\begin_inset Formula $\c=\c\left(\varepsilon,\D\right)$
\end_inset

 such that 
\begin_inset Formula $\G\in\GG\left(n,\c/n\right)$
\end_inset

 a.a.s.
 contains every tree of maximum degree at most 
\begin_inset Formula $\D$
\end_inset

 on 
\begin_inset Formula $\left(1-\varepsilon\right)n$
\end_inset

 vertices.
\end_layout

\begin_layout Standard
We will split the proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "thm:main-theorem"

\end_inset

 into two cases in a similar way to 
\begin_inset CommandInset citation
LatexCommand cite
key "Kri10"

\end_inset

.
 If our spanning tree 
\begin_inset Formula $\T$
\end_inset

 has many leaves, then we remove the leaves and embed the resulting non-spanning
 tree in 
\begin_inset Formula $\R$
\end_inset

 using 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:almost-spanning"

\end_inset

.
 To complete this into our spanning tree 
\begin_inset Formula $\T$
\end_inset

, it remains to match the the vertices needing leaves with leftover vertices.
 This amounts to finding a perfect matching in a certain bipartite graph.
 The random edges in 
\begin_inset Formula $\R$
\end_inset

 provide several almost-perfect matchings on their own; we combine these
 with the dense graph 
\begin_inset Formula $\G$
\end_inset

 to satisfy the conditions of Hall's marriage theorem and guarantee the
 required perfect matching.
 The details for this case are given in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:many-leaves"

\end_inset

.
\end_layout

\begin_layout Standard
The more difficult case is where 
\begin_inset Formula $\T$
\end_inset

 has few leaves, which we attack in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:few leaves"

\end_inset

.
 In this case 
\begin_inset Formula $\T$
\end_inset

 cannot be very 
\begin_inset Quotes eld
\end_inset

complicated
\begin_inset Quotes erd
\end_inset

 and must be a subdivision of a small tree.
 In particular 
\begin_inset Formula $\T$
\end_inset

 must have many long 
\emph on
bare paths
\emph default
: paths where each vertex has degree exactly two.
 By removing these bare paths we obtain a small forest which we can embed
 into 
\begin_inset Formula $\R$
\end_inset

 using 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:almost-spanning"

\end_inset

 (the details are in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:embed-forest"

\end_inset

).
 In order to complete this forest into our spanning tree 
\begin_inset Formula $\T$
\end_inset

, we need to join up distinguished 
\begin_inset Quotes eld
\end_inset

special pairs
\begin_inset Quotes erd
\end_inset

 of vertices with disjoint paths of certain lengths.
\end_layout

\begin_layout Standard
In order to make this task feasible, in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:partition-into-blobs"

\end_inset

 we first use Szemer
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

edi's regularity lemma to divide the vertex set into a bounded number of
 
\begin_inset Quotes eld
\end_inset

clusters
\begin_inset Quotes erd
\end_inset

, which we can partition into 
\begin_inset Quotes eld
\end_inset

super-regular pairs
\begin_inset Quotes erd
\end_inset

 (basically, dense subgraphs with edges very well-distributed in 
\begin_inset Formula $\G$
\end_inset

).
 After embedding our small forest, In 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:fix-endpoints"

\end_inset

 we find some short paths that effectively 
\begin_inset Quotes eld
\end_inset

move
\begin_inset Quotes erd
\end_inset

 the special pairs we need to join up.
 We do this in such a way that it remains to join up special pairs of vertices
 which are each fully contained in one of the super-regular cluster-pairs
 with which we partitioned 
\begin_inset Formula $\G$
\end_inset

.
 Combining the super-regularity in the cluster-pairs with the random edges
 in 
\begin_inset Formula $\R$
\end_inset

, in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:cluster-adjustment"

\end_inset

 we can then greedily find many of our desired paths.
 We carefully set aside some of these special paths in such a way that the
 numbers of vertices remaining in each cluster satisfy certain divisibility
 requirements.
 From here the super-regularity of the pairs allows us to find the rest
 of our paths using a tool called the 
\begin_inset Quotes eld
\end_inset

blow-up lemma
\begin_inset Quotes erd
\end_inset

 (
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:blow-up"

\end_inset

).
\end_layout

\begin_layout Section
Proof of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
texorpdfstring{}{Theorem~}
\end_layout

\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "thm:main-theorem"

\end_inset


\end_layout

\begin_layout Standard
We split the random edges into multiple independent 
\begin_inset Quotes eld
\end_inset

phases
\begin_inset Quotes erd
\end_inset

: say 
\begin_inset Formula $\R\supseteq\R_{1}\cup\R_{2}\cup\R_{3}\cup\R_{4}$
\end_inset

, where 
\begin_inset Formula $\R_{i}\in\GG\left(n,\c_{i}/n\right)$
\end_inset

 for some large 
\begin_inset Formula $\c_{i}=\c_{i}\left(\a,\D\right)$
\end_inset

 to be determined later (these 
\begin_inset Formula $\c_{i}$
\end_inset

 will in turn determine 
\begin_inset Formula $\c$
\end_inset

).
 Let 
\begin_inset Formula $V=\range n$
\end_inset

 be the common vertex set of 
\begin_inset Formula $\G$
\end_inset

, 
\begin_inset Formula $\R$
\end_inset

 and the 
\begin_inset Formula $\R_{i}$
\end_inset

.
\end_layout

\begin_layout Remark
\begin_inset CommandInset label
LatexCommand label
name "rem:symmetry"

\end_inset

At several points in the proof we will prove that (with high probability)
 there exist certain substructures in the random edges 
\begin_inset Formula $\R$
\end_inset

, and we will assume by symmetry that these substructures (or some corresponding
 vertex sets) are themselves uniformly random.
 A simple way to see why this kind of reasoning is valid, is to notice that
 if we apply a uniformly random vertex permutation to a random graph 
\begin_inset Formula $\R\in\GG\left(n,p\right)$
\end_inset

 (or even just to some specific subset of vertices), then by symmetry the
 resulting distribution is still 
\begin_inset Formula $\GG\left(n,p\right)$
\end_inset

.
 So we can imagine that we are finding substructures in an auxiliary random
 graph, then randomly mapping these structures to our vertex set.
\end_layout

\begin_layout Subsection
Case 1: 
\begin_inset Formula $\T$
\end_inset

 has many leaves
\begin_inset CommandInset label
LatexCommand label
name "sub:many-leaves"

\end_inset


\end_layout

\begin_layout Standard
For our first case suppose there are at least 
\begin_inset Formula $\lambda n$
\end_inset

 leaves in 
\begin_inset Formula $\T$
\end_inset

 (for some fixed 
\begin_inset Formula $\lambda=\lambda\left(\a\right)>0$
\end_inset

 to be determined in the second case).
 Then consider the tree 
\begin_inset Formula $\T'$
\end_inset

 with some 
\begin_inset Formula $\lambda n$
\end_inset

 leaves removed.
 By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:almost-spanning"

\end_inset

 we can a.a.s.
 embed 
\begin_inset Formula $\T'$
\end_inset

 into 
\begin_inset Formula $\R_{1}$
\end_inset

.
 Let 
\begin_inset Formula $A'\subseteq V$
\end_inset

 be the set of vertices of 
\begin_inset Formula $\T'$
\end_inset

 which had a leaf deleted from them, and let 
\begin_inset Formula $B\subseteq V$
\end_inset

 be the set of 
\begin_inset Formula $\lambda n$
\end_inset

 vertices not part of 
\begin_inset Formula $\T'$
\end_inset

.
 We can assume 
\begin_inset Formula $A'$
\end_inset

 and 
\begin_inset Formula $B$
\end_inset

 are uniformly random disjoint sets of the appropriate size (note 
\begin_inset Formula $\left|A'\right|\ge\lambda n/\D$
\end_inset

 and 
\begin_inset Formula $\left|B\right|=\lambda n$
\end_inset

).
 For each 
\begin_inset Formula $a\in A'$
\end_inset

, the random variable 
\begin_inset Formula $\left|N_{\G}\left(a\right)\cap B\right|$
\end_inset

 is hypergeometrically distributed with expected value 
\begin_inset Formula $\lambda\a n$
\end_inset

, and similarly each 
\begin_inset Formula $\left|N_{\G}\left(b\right)\cap A'\right|$
\end_inset

 (
\begin_inset Formula $b\in B$
\end_inset

) is hypergeometric with expectation at least 
\begin_inset Formula $\lambda\a n/\D$
\end_inset

.
 Let 
\begin_inset Formula $\beta=\lambda\a/\left(2\D\right)$
\end_inset

; by a concentration inequality (for example, see 
\begin_inset CommandInset citation
LatexCommand cite
after "Theorem 2.10"
key "JLR00"

\end_inset

) and the union bound, in 
\begin_inset Formula $\G$
\end_inset

 each 
\begin_inset Formula $a'\in A'$
\end_inset

 a.a.s.
 has at least 
\begin_inset Formula $\beta n$
\end_inset

 neighbours in 
\begin_inset Formula $B$
\end_inset

, and each 
\begin_inset Formula $b\in B$
\end_inset

 a.a.s.
 has at least 
\begin_inset Formula $\beta n$
\end_inset

 neighbours in 
\begin_inset Formula $A'$
\end_inset

.
 From now on we treat 
\begin_inset Formula $A'$
\end_inset

 and 
\begin_inset Formula $B$
\end_inset

 as fixed sets satisfying these properties.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $A$
\end_inset

 be a set consisting of 
\begin_inset Formula $\ell$
\end_inset

 copies of each vertex 
\begin_inset Formula $a'\in A'$
\end_inset

 which needs 
\begin_inset Formula $\ell$
\end_inset

 extra leaves (so 
\begin_inset Formula $\left|A\right|=\lambda n$
\end_inset

).
 Define a bipartite graph 
\begin_inset Formula $\B{\G}$
\end_inset

 on the vertex set 
\begin_inset Formula $A\cup B$
\end_inset

, with an edge between 
\begin_inset Formula $a\in A$
\end_inset

 (a copy of 
\begin_inset Formula $a'\in A'$
\end_inset

) and 
\begin_inset Formula $b\in B$
\end_inset

, if there is an edge between 
\begin_inset Formula $a'$
\end_inset

 and 
\begin_inset Formula $b$
\end_inset

 in 
\begin_inset Formula $\G$
\end_inset

.
 Similarly define 
\begin_inset Formula $\B{\R_{2}}$
\end_inset

 and 
\begin_inset Formula $\B{\G\cup\R}$
\end_inset

 with edges deriving from 
\begin_inset Formula $\R_{2}$
\end_inset

 and 
\begin_inset Formula $\G\cup\R$
\end_inset

.
 If we can find a perfect matching in 
\begin_inset Formula $\B{\G}\cup\B{\R_{2}}\subseteq\B{\G\cup\R}$
\end_inset

, this gives us a way to extend our embedding of 
\begin_inset Formula $\T'$
\end_inset

 to an embedding of 
\begin_inset Formula $\T$
\end_inset

, as desired.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\BB_{A,B}\left(p\right)$
\end_inset

 be the random bipartite graph distribution where each of the 
\begin_inset Formula $\left|A\right|\left|B\right|$
\end_inset

 possible edges between 
\begin_inset Formula $A$
\end_inset

 and 
\begin_inset Formula $B$
\end_inset

 are present with probability 
\begin_inset Formula $p$
\end_inset

.
 For any 
\begin_inset Formula $\c_{\BB}$
\end_inset

, we can choose large 
\begin_inset Formula $\c_{2}$
\end_inset

 such that for any 
\begin_inset Formula $a'\in A$
\end_inset

 and 
\begin_inset Formula $b\in B$
\end_inset

, and for large 
\begin_inset Formula $n$
\end_inset

, 
\begin_inset Formula 
\begin{align*}
 & \Pr\left(\mbox{all copies of }a'\mbox{ are adjacent to }b\mbox{ in }\B{\R_{2}}\right)=\c_{2}/n\\
 & \quad\ge1-\left(1-\c_{\BB}/n\right)^{\Delta}=\Pr\left(\mbox{some copy of }a'\mbox{ is adjacent to }b\mbox{ in }\BB_{A,B}\left(\c_{\BB}/n\right)\right).
\end{align*}

\end_inset

This means we can couple 
\begin_inset Formula $\B{\R_{2}}$
\end_inset

 and 
\begin_inset Formula $G_{\BB}\in\BB_{A,B}\left(\c_{\BB}/n\right)$
\end_inset

 in such a way that 
\begin_inset Formula $\B{\R_{2}}\supseteq G_{\BB}$
\end_inset

 (the distribution of 
\begin_inset Formula $\B{\R_{2}}$
\end_inset

 
\emph on
stochastically dominates
\emph default
 
\begin_inset Formula $\BB_{A,B}\left(\c_{\BB}/n\right)$
\end_inset

).
 The following lemma then provides the desired perfect matching.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:bipartite-perfect-matching"

\end_inset

Let 
\begin_inset Formula $A$
\end_inset

 and 
\begin_inset Formula $B$
\end_inset

 be 
\begin_inset Formula $n$
\end_inset

-vertex sets.
 There is 
\begin_inset Formula $\c_{\BB}=\c_{\BB}\left(\a\right)$
\end_inset

 such that if 
\begin_inset Formula $\G$
\end_inset

 is a bipartite graph with bipartition 
\begin_inset Formula $A\cup B$
\end_inset

 and minimum degree at least 
\begin_inset Formula $\a n$
\end_inset

, and if 
\begin_inset Formula $\R\in\BB_{A,B}\left(\c_{\BB}/n\right)$
\end_inset

, then a.a.s.
 
\begin_inset Formula $\G\cup\R$
\end_inset

 has a perfect matching.
\end_layout

\begin_layout Standard
In order to prove 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:bipartite-perfect-matching"

\end_inset

 we need another lemma.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:bipartite-matching"

\end_inset

Let 
\begin_inset Formula $\varepsilon>0$
\end_inset

, and let 
\begin_inset Formula $A$
\end_inset

 and 
\begin_inset Formula $B$
\end_inset

 be 
\begin_inset Formula $n$
\end_inset

-vertex sets.
 There is 
\begin_inset Formula $\c=\c\left(\varepsilon\right)$
\end_inset

 such that 
\begin_inset Formula $\R\in\BB_{A,B}\left(\c/n\right)$
\end_inset

 has a matching of size 
\begin_inset Formula $\left(1-\varepsilon\right)n$
\end_inset

.
\end_layout

\begin_layout Proof
For any subsets 
\begin_inset Formula $A'$
\end_inset

 and 
\begin_inset Formula $B'$
\end_inset

 of size 
\begin_inset Formula $\varepsilon n$
\end_inset

, the probability there is no edge between 
\begin_inset Formula $A'$
\end_inset

 and 
\begin_inset Formula $B'$
\end_inset

 is 
\begin_inset Formula $\left(1-\c/n\right)^{\left(\varepsilon n\right)^{2}}\le e^{-\c\varepsilon^{2}n}$
\end_inset

.
 There are at most 
\begin_inset Formula $2^{2n}$
\end_inset

 choices of such 
\begin_inset Formula $A',B'$
\end_inset

, so for large 
\begin_inset Formula $\c$
\end_inset

, by the union bound there is a.a.s.
 an edge between any such pair of sets.
 It follows that a maximum-size matching a.a.s.
 has at least 
\begin_inset Formula $\left(1-\varepsilon\right)n$
\end_inset

 edges.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Proof
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:bipartite-perfect-matching"

\end_inset


\end_layout

\end_inset

We apply Hall's marriage theorem.
 If 
\begin_inset Formula $W\subseteq A$
\end_inset

 with 
\begin_inset Formula $\left|W\right|\le\a n$
\end_inset

 then 
\begin_inset Formula $\left|N_{\G}\left(W\right)\right|\ge\a n\ge\left|W\right|$
\end_inset

 by the minimum degree condition on 
\begin_inset Formula $\G$
\end_inset

.
 Similarly, every vertex outside 
\begin_inset Formula $N_{\G}\left(W\right)$
\end_inset

 has at least 
\begin_inset Formula $\a n$
\end_inset

 neighbours outside 
\begin_inset Formula $W$
\end_inset

, so if 
\begin_inset Formula $\left|W\right|\ge\left(1-\a\right)n$
\end_inset

 then 
\begin_inset Formula $\left|N_{\G}\left(W\right)\right|=n\ge\left|W\right|$
\end_inset

.
 So, consider any 
\begin_inset Formula $W$
\end_inset

 with 
\begin_inset Formula $\a n\le\left|W\right|\le\left(1-\a\right)n$
\end_inset

 (in which case we must have 
\begin_inset Formula $\a\le1/2$
\end_inset

).
 Split 
\begin_inset Formula $\R$
\end_inset

 into phases 
\begin_inset Formula $\R\supseteq\R_{1}\cup\dots\cup\R_{r}$
\end_inset

, with 
\begin_inset Formula $\R_{i}\in\BB_{A,B}\left(\c'/n\right)$
\end_inset

, for some 
\begin_inset Formula $\c'=\c'\left(\a\right)$
\end_inset

 and 
\begin_inset Formula $r=r\left(\a\right)$
\end_inset

 to be determined.
\end_layout

\begin_layout Proof
By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:bipartite-matching"

\end_inset

, if 
\begin_inset Formula $\c'$
\end_inset

 is large we can find a 
\begin_inset Formula $\left(1-\a/8\right)n$
\end_inset

-edge matching 
\begin_inset Formula $M_{i}$
\end_inset

 in each 
\begin_inset Formula $\R_{i}$
\end_inset

.
 Let 
\begin_inset Formula $N_{i}=N_{M_{i}}\left(W\right)$
\end_inset

 contain the vertices matched with 
\begin_inset Formula $W$
\end_inset

 in each 
\begin_inset Formula $M_{i}$
\end_inset

, and note that each 
\begin_inset Formula $N_{i}$
\end_inset

 is a random set satisfying 
\begin_inset Formula $\left|W\right|-\a n/8\le\left|N_{i}\right|\le\left|W\right|$
\end_inset

.
 Condition on 
\begin_inset Formula $N_{1}$
\end_inset

, and condition on the number of vertices 
\begin_inset Formula $\left|N_{i}\right|$
\end_inset

 matched by 
\begin_inset Formula $W$
\end_inset

 in each 
\begin_inset Formula $M_{i}$
\end_inset

.
 Now, for each 
\begin_inset Formula $i>1$
\end_inset

, note that 
\begin_inset Formula $\left|N_{i}\cap N_{1}\right|$
\end_inset

 is hypergeometrically distributed with mean 
\begin_inset Formula $\left|N_{i}\right|\left|N_{1}\right|/n$
\end_inset

.
 Since 
\begin_inset Formula $\left|W\right|\left(n-\left|W\right|\right)\ge\a n\left(1-\a\right)n\ge\a n^{2}/2$
\end_inset

, we have 
\begin_inset Formula $\left|W\right|^{2}\le\left|W\right|n-\a n^{2}/2$
\end_inset

 and 
\begin_inset Formula 
\[
\left|N_{i}\right|\left|N_{1}\right|/n\le\left|W\right|^{2}/n\le\left|W\right|-\a n/2=2\left(\left|W\right|-\a/8\right)-\left|W\right|-\a/4\le\left|N_{i}\right|+\left|N_{1}\right|-\left|W\right|-\a n/4.
\]

\end_inset

So, by a concentration inequality,
\begin_inset Formula 
\[
\Pr\left(\left|N_{i}\cup N_{1}\right|<\left|W\right|\right)=\Pr\left(\left|N_{i}\cap N_{1}\right|>\left|N_{i}\right|+\left|N_{1}\right|-\left|W\right|\right)=e^{-\Omega\left(\a^{2}n\right)}
\]

\end_inset

and therefore
\begin_inset Formula 
\[
\Pr\left(\left|N_{\R}\left(W\right)\right|<\left|W\right|\right)\le\prod_{i=2}^{r}\Pr\left(\left|N_{i}\cup N_{1}\right|<\left|W\right|\right)=e^{-\Omega\left(r\a^{2}n\right)}.
\]

\end_inset

If 
\begin_inset Formula $r$
\end_inset

 is large this probability is 
\begin_inset Formula $o\left(2^{-n}\right)$
\end_inset

, and since there are at most 
\begin_inset Formula $2^{n}$
\end_inset

 choices for 
\begin_inset Formula $W$
\end_inset

, the union bound gives 
\begin_inset Formula $\left|N_{\R}\left(W\right)\right|\ge\left|W\right|$
\end_inset

 for all required 
\begin_inset Formula $W$
\end_inset

.
\end_layout

\begin_layout Subsection
Case 2: 
\begin_inset Formula $\T$
\end_inset

 has few leaves
\begin_inset CommandInset label
LatexCommand label
name "sub:few leaves"

\end_inset


\end_layout

\begin_layout Standard
Now we address the second case where there are fewer than 
\begin_inset Formula $\lambda n$
\end_inset

 leaves in 
\begin_inset Formula $\T$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Partitioning into super-regular pairs
\begin_inset CommandInset label
LatexCommand label
name "sub:partition-into-blobs"

\end_inset


\end_layout

\begin_layout Standard
As outlined, we first need to divide 
\begin_inset Formula $G$
\end_inset

 into a bounded number of pairs of 
\begin_inset Quotes eld
\end_inset

partner clusters
\begin_inset Quotes erd
\end_inset

 with edges well-distributed between them.
 This partition will inform the way we use 
\begin_inset Formula $\R$
\end_inset

 to embed 
\begin_inset Formula $\T$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\h}{h}
{\boldsymbol{h}}
\end_inset


\end_layout

\begin_layout Definition
For a disjoint pair of vertex sets 
\begin_inset Formula $\left(X,Y\right)$
\end_inset

 in a graph, let its 
\emph on
density
\emph default
 
\begin_inset Formula $d\left(X,Y\right)$
\end_inset

 be the number of edges between 
\begin_inset Formula $X$
\end_inset

 and 
\begin_inset Formula $Y$
\end_inset

, divided by 
\begin_inset Formula $\left|X\right|\left|Y\right|$
\end_inset

.
 A pair of vertex sets 
\begin_inset Formula $\left(V_{1},V_{2}\right)$
\end_inset

 is said to be 
\emph on

\begin_inset Formula $\varepsilon$
\end_inset

-regular
\emph default
 if for any 
\begin_inset Formula $U_{1},U_{2}$
\end_inset

 with 
\begin_inset Formula $U_{\h}\subseteq V_{\h}$
\end_inset

 and 
\begin_inset Formula $\left|U_{\h}\right|\ge\varepsilon\left|V_{\h}\right|$
\end_inset

, we have 
\begin_inset Formula $\left|d\left(U_{1},U_{2}\right)-d\left(V_{1},V_{2}\right)\right|\le\varepsilon$
\end_inset

.
 If alternatively 
\begin_inset Formula $d\left(U_{1},U_{2}\right)\ge\delta$
\end_inset

 for all such pairs 
\begin_inset Formula $U_{1},U_{2}$
\end_inset

 then we say 
\begin_inset Formula $\left(V_{1},V_{2}\right)$
\end_inset

 is 
\emph on

\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense
\emph default
.
 Let 
\begin_inset Formula $\flip{\h}=2-\h$
\end_inset

; if 
\begin_inset Formula $\left(V_{1},V_{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense and moreover each 
\begin_inset Formula $v\in V_{\h}$
\end_inset

 has at least 
\begin_inset Formula $\delta\left|V_{\flip{\h}}\right|$
\end_inset

 neighbours in 
\begin_inset Formula $V_{\flip{\h}}$
\end_inset

, then we say 
\begin_inset Formula $\left(V_{1},V_{2}\right)$
\end_inset

 is 
\emph on

\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular
\emph default
.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:partition-into-blobs"

\end_inset

For 
\begin_inset Formula $\a,\varepsilon>0$
\end_inset

 with 
\begin_inset Formula $\varepsilon$
\end_inset

 sufficiently small relative to 
\begin_inset Formula $\a$
\end_inset

, there are 
\begin_inset Formula $\delta=\delta\left(\a\right)>0$
\end_inset

, 
\begin_inset Formula $R=R\left(\a\right)$
\end_inset

 and 
\begin_inset Formula $Q=Q\left(\a,\varepsilon\right)$
\end_inset

, such that the following holds.
 Let 
\begin_inset Formula $\G$
\end_inset

 be a graph on 
\begin_inset Formula $\range n$
\end_inset

 with minimum degree at least 
\begin_inset Formula $\a n$
\end_inset

.
 We can choose 
\begin_inset Formula $q\le Q$
\end_inset

 and partition 
\begin_inset Formula $\range n$
\end_inset

 into clusters 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

 (
\begin_inset Formula $1\le i\le q$
\end_inset

, 
\begin_inset Formula $\h=1,2$
\end_inset

) such that each 
\begin_inset Formula $\left|V_{i}^{\h}\right|=\Theta\left(n\right)$
\end_inset

 and each pair 
\begin_inset Formula $\left(V_{i}^{1},V_{i}^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular.
 Moreover, each 
\begin_inset Formula $\left|V_{i}^{\h}\right|/\left|V_{j}^{g}\right|\le R$
\end_inset

.
\end_layout

\begin_layout Standard
We emphasize that in 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:partition-into-blobs"

\end_inset

 we do 
\emph on
not 
\emph default
guarantee that the sets 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

 are the same size, just that the variation in the sizes of the clusters
 is bounded independently of 
\begin_inset Formula $\varepsilon$
\end_inset

.
\end_layout

\begin_layout Standard
To prove 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:partition-into-blobs"

\end_inset

, we will apply Szemer
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

edi's regularity lemma to obtain a reduced 
\emph on
cluster graph
\emph default
, then decompose this cluster graph into small stars.
 In each star 
\begin_inset Formula $T_{i}$
\end_inset

, the centre cluster will correspond to 
\begin_inset Formula $V_{i}^{1}$
\end_inset

 and the leaf clusters will be combined to form 
\begin_inset Formula $V_{i}^{2}$
\end_inset

.
 We will then have to redistribute some of the vertices to ensure super-regulari
ty.
 Before giving the details of the proof, we give a statement of (a version
 of) Szemer
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

edi's regularity lemma and some auxiliary lemmas for working with regularity
 and super-regularity.
\end_layout

\begin_layout Lemma
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Szemer
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

edi's regularity lemma, minimum degree form
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "lem:szemeredi-regularity"

\end_inset

For every 
\begin_inset Formula $\a>0$
\end_inset

, and any 
\begin_inset Formula $\varepsilon>0$
\end_inset

 that is sufficiently small relative to 
\begin_inset Formula $\a$
\end_inset

, there is 
\begin_inset Formula $\a'=\a'\left(\a\right)>0$
\end_inset

 and 
\begin_inset Formula $K=K\left(\varepsilon\right)$
\end_inset

 such that the following holds.
 For any graph 
\begin_inset Formula $\G$
\end_inset

 of minimum degree at least 
\begin_inset Formula $\a\left|\G\right|$
\end_inset

, there is a partition of 
\begin_inset Formula $V\left(\G\right)$
\end_inset

 into clusters 
\begin_inset Formula $V_{0},V_{1},\dots V_{k}$
\end_inset

 (
\begin_inset Formula $k\le K$
\end_inset

), and a spanning subgraph 
\begin_inset Formula $\G'$
\end_inset

 of 
\begin_inset Formula $\G$
\end_inset

, satisfying the following properties.
 The 
\begin_inset Quotes eld
\end_inset

exceptional cluster
\begin_inset Quotes erd
\end_inset

 
\begin_inset Formula $V_{0}$
\end_inset

 has size at most 
\begin_inset Formula $\varepsilon n$
\end_inset

, and the other clusters have equal size 
\begin_inset Formula $sn$
\end_inset

.
 The minimum degree of 
\begin_inset Formula $\G'$
\end_inset

 is at least 
\begin_inset Formula $\a'n$
\end_inset

.
 There are no edges of 
\begin_inset Formula $\G'$
\end_inset

 within clusters, and each pair of non-exceptional clusters is 
\begin_inset Formula $\varepsilon$
\end_inset

-regular in 
\begin_inset Formula $\G'$
\end_inset

 with density zero or at least 
\begin_inset Formula $\a'$
\end_inset

.
 Moreover, define the 
\emph on
cluster graph
\emph default
 
\begin_inset Formula $C$
\end_inset

 as the graph whose vertices are the 
\begin_inset Formula $k$
\end_inset

 non-exceptional clusters 
\begin_inset Formula $V_{i}$
\end_inset

, and whose edges are the pairs of clusters between which there is nonzero
 density in 
\begin_inset Formula $\G'$
\end_inset

.
 The minimum degree of 
\begin_inset Formula $C$
\end_inset

 is at least 
\begin_inset Formula $\a'k$
\end_inset

.
\end_layout

\begin_layout Standard
This version of Szemeredi's regularity lemma follows directly from 
\begin_inset CommandInset citation
LatexCommand cite
after "Proposition~9"
key "KOT05"

\end_inset

.
\end_layout

\begin_layout Standard
Before we proceed to the proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:partition-into-blobs"

\end_inset

, we give some simple lemmas about 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-denseness.
 Note that 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-denseness is basically a one-sided version of 
\begin_inset Formula $\varepsilon$
\end_inset

-regularity that is more convenient in proofs about super-regularity.
 In particular, an 
\begin_inset Formula $\varepsilon$
\end_inset

-regular pair with density 
\begin_inset Formula $\delta$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta-\varepsilon\right)$
\end_inset

-dense.
 Here and in later sections, most of the theorems about 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense pairs correspond to analogous theorems for 
\begin_inset Formula $\varepsilon$
\end_inset

-regular pairs with density about 
\begin_inset Formula $\delta$
\end_inset

.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:combine-clusters"

\end_inset

Suppose 
\begin_inset Formula $V_{1}^{2},\dots,V_{r}^{2}$
\end_inset

 are disjoint clusters of the same sizes such that each 
\begin_inset Formula $\left(V^{1},V_{i}^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense.
 Let 
\begin_inset Formula $V^{2}=\bigcup_{i=1}^{r}V_{i}^{2}$
\end_inset

; then 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta/r\right)$
\end_inset

-dense.
\end_layout

\begin_layout Proof
Let 
\begin_inset Formula $U^{\h}\subseteq V^{\h}$
\end_inset

 with 
\begin_inset Formula $\left|U^{\h}\right|\ge\varepsilon\left|V^{\h}\right|$
\end_inset

.
 Let 
\begin_inset Formula $V_{i}^{2}$
\end_inset

 be the cluster which has the largest intersection with 
\begin_inset Formula $U^{2}$
\end_inset

, so we have 
\begin_inset Formula $\left|U^{2}\cap V_{i}^{2}\right|\ge\varepsilon\left|V^{2}\right|/r=\varepsilon\left|V_{i}^{2}\right|$
\end_inset

, and there are therefore at least 
\begin_inset Formula $\delta\left|U^{1}\right|\left|U^{2}\cap V_{i}^{2}\right|\ge\left(\delta/r\right)\left|U^{1}\right|\left|U^{2}\right|$
\end_inset

 edges between 
\begin_inset Formula $U^{1}$
\end_inset

 and 
\begin_inset Formula $U^{2}$
\end_inset

.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:robust-regular"

\end_inset

Let 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 be an 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense pair with 
\begin_inset Formula $\varepsilon$
\end_inset

 sufficiently small , and suppose we have 
\begin_inset Formula $W^{\h}\supseteq V^{\h}$
\end_inset

 with 
\begin_inset Formula $\left|W^{\h}\right|\le\left(1+f\varepsilon\right)\left|V^{\h}\right|$
\end_inset

.
 Then 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is an 
\begin_inset Formula $\left(\varepsilon',\delta'\right)$
\end_inset

-dense pair, with 
\begin_inset Formula $\varepsilon'=\max\left\{ 2f,1+f\right\} \varepsilon$
\end_inset

 and 
\begin_inset Formula $\delta'=\min\left\{ 1/4,1/\left(1+f\varepsilon\right)\right\} \delta$
\end_inset

.
 If moreover 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular and each vertex in 
\begin_inset Formula $W^{\h}\backslash V^{\h}$
\end_inset

 has at least 
\begin_inset Formula $\delta'\left|W^{\flip{\h}}\right|$
\end_inset

 neighbours in 
\begin_inset Formula $W^{\flip{\h}}$
\end_inset

, then 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is an 
\begin_inset Formula $\left(\varepsilon',\delta'\right)$
\end_inset

-super-regular pair.
\end_layout

\begin_layout Proof
Suppose 
\begin_inset Formula $U^{\h}\subseteq W^{\h}$
\end_inset

 with 
\begin_inset Formula $\left|U^{\h}\right|\ge\varepsilon'\left|W^{\h}\right|$
\end_inset

.
 Then 
\begin_inset Formula $\left|U^{\h}\cap V^{\h}\right|\ge\varepsilon'\left|W^{\h}\right|-f\varepsilon\left|V^{\h}\right|\ge\varepsilon\left|V^{\h}\right|$
\end_inset

 so there are at least 
\begin_inset Formula $\delta\left|U^{1}\cap V^{1}\right|\left|U^{2}\cap V^{2}\right|$
\end_inset

 edges between 
\begin_inset Formula $U^{1}$
\end_inset

 and 
\begin_inset Formula $U^{2}$
\end_inset

.
 But note that 
\begin_inset Formula $\left|U^{\h}\cap V^{\h}\right|\ge\left|U^{\h}\right|-f\varepsilon\left|W^{\h}\right|\ge\left(1-\left(f\varepsilon\right)/\varepsilon'\right)\left|U^{\h}\right|\ge\left(1/2\right)\left|U^{\h}\right|$
\end_inset

, so 
\begin_inset Formula $d\left(U^{1},U^{2}\right)\ge\delta/4$
\end_inset

 and 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon',\delta'\right)$
\end_inset

-dense.
\end_layout

\begin_layout Proof
Now consider the second part of the lemma where 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular.
 By this super-regularity each 
\begin_inset Formula $v\in V^{\h}$
\end_inset

 has 
\begin_inset Formula $\delta\left|V^{\flip{\h}}\right|\ge\delta'\left|W^{\flip{\h}}\right|$
\end_inset

 neighbours in 
\begin_inset Formula $W^{\flip{\h}}$
\end_inset

, and by assumption each 
\begin_inset Formula $v\in W^{\h}\backslash V^{\h}$
\end_inset

 has 
\begin_inset Formula $\delta'\left|W^{\flip{\h}}\right|$
\end_inset

 neighbours in 
\begin_inset Formula $W^{\flip{\h}}$
\end_inset

, proving that 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon',\delta'\right)$
\end_inset

-super-regular.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:regular-contains-superregular"

\end_inset

Every 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense pair 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 contains a 
\begin_inset Formula $\left(\varepsilon/\left(1-\varepsilon\right),\delta-\varepsilon\right)$
\end_inset

-super-regular sub-pair 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

, where 
\begin_inset Formula $\left|W^{\h}\right|\ge\left(1-\varepsilon\right)\left|V^{\h}\right|$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:regular-contains-superregular"

\end_inset

 follows easily from the same proof as 
\begin_inset CommandInset citation
LatexCommand cite
after "Proposition~6"
key "BST08"

\end_inset

.
\end_layout

\begin_layout Standard
Now we prove 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:partition-into-blobs"

\end_inset

.
 First we need a lemma for our decomposition into small stars.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:star-cover"

\end_inset

Let 
\begin_inset Formula $G$
\end_inset

 be an 
\begin_inset Formula $n$
\end_inset

-vertex graph with minimum degree at least 
\begin_inset Formula $\a n$
\end_inset

.
 Then there is a spanning subgraph 
\begin_inset Formula $S$
\end_inset

 which is a union of vertex-disjoint stars, each with at least two and at
 most 
\begin_inset Formula $1+1/\a$
\end_inset

 vertices.
\end_layout

\begin_layout Proof
Let 
\begin_inset Formula $S$
\end_inset

 be a union of such stars with the maximum number of vertices.
 Suppose there is a vertex 
\begin_inset Formula $v$
\end_inset

 uncovered by 
\begin_inset Formula $S$
\end_inset

.
 If 
\begin_inset Formula $v$
\end_inset

 has a neighbour which is a centre of one of the stars in 
\begin_inset Formula $S$
\end_inset

, and that star has fewer than 
\begin_inset Formula $1+\floor{1/\a}$
\end_inset

 vertices, then we could add 
\begin_inset Formula $v$
\end_inset

 to that star, contradicting maximality.
 (Here we allow either vertex of a 2-vertex star to be considered the 
\begin_inset Quotes eld
\end_inset

centre
\begin_inset Quotes erd
\end_inset

).
 Otherwise, if 
\begin_inset Formula $v$
\end_inset

 has a neighbour 
\begin_inset Formula $w$
\end_inset

 which is a leaf of one of the stars in 
\begin_inset Formula $S$
\end_inset

, then we could remove that leaf from its star and create a new 2-vertex
 star with edge 
\begin_inset Formula $vw$
\end_inset

, again contradicting maximality.
 The remaining case is where each of the (at least 
\begin_inset Formula $\a n$
\end_inset

) neighbours of 
\begin_inset Formula $v$
\end_inset

 is a centre of a star with 
\begin_inset Formula $1+\floor{1/\a}>1/\a$
\end_inset

 vertices.
 But these stars would comprise more than 
\begin_inset Formula $n$
\end_inset

 vertices, which is again a contradiction.
 We conclude that 
\begin_inset Formula $S$
\end_inset

 covers 
\begin_inset Formula $G$
\end_inset

, as desired.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Proof
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:partition-into-blobs"

\end_inset


\end_layout

\end_inset

Apply our minimum degree form of Szemer
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

edi's regularity lemma, with some 
\begin_inset Formula $\varepsilon'$
\end_inset

 to be determined (which we will repeatedly assume is sufficiently small).
 Consider a cover of 
\begin_inset Formula $C$
\end_inset

 by stars 
\begin_inset Formula $T_{1},\dots,T_{q}$
\end_inset

 of size at most 
\begin_inset Formula $1+1/\a'$
\end_inset

, as guaranteed by 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:star-cover"

\end_inset

.
 Let 
\begin_inset Formula $W_{i}^{1}$
\end_inset

 be the centre cluster of 
\begin_inset Formula $T_{i}$
\end_inset

, and let 
\begin_inset Formula $W_{i}^{2}$
\end_inset

 be the union of the leaf clusters of 
\begin_inset Formula $T_{i}$
\end_inset

 (for two-vertex stars, arbitrarily choose one vertex as the 
\begin_inset Quotes eld
\end_inset

leaf
\begin_inset Quotes erd
\end_inset

 and one as the 
\begin_inset Quotes eld
\end_inset

centre
\begin_inset Quotes erd
\end_inset

).
 Each edge of the cluster graph 
\begin_inset Formula $C$
\end_inset

 corresponds to an 
\begin_inset Formula $\left(\varepsilon',\a'/2\right)$
\end_inset

-dense pair, and each 
\begin_inset Formula $W_{i}^{\h}$
\end_inset

 is the union of at most 
\begin_inset Formula $1/\a'$
\end_inset

 clusters 
\begin_inset Formula $V_{i}$
\end_inset

.
 By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:combine-clusters"

\end_inset

, with 
\begin_inset Formula $\delta'=\left(\a'\right)^{2}/2$
\end_inset

 each pair 
\begin_inset Formula $\left(W_{i}^{1},W_{i}^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon',\delta'\right)$
\end_inset

-dense in 
\begin_inset Formula $\G'$
\end_inset

 (therefore 
\begin_inset Formula $\G$
\end_inset

).
\end_layout

\begin_layout Proof
Apply 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:regular-contains-superregular"

\end_inset

 to obtain sets 
\begin_inset Formula $V_{i}^{\h}\subseteq W_{i}^{\h}$
\end_inset

 such that 
\begin_inset Formula $\left|V_{i}^{\h}\right|=\left(1-\varepsilon'\right)\left|W_{i}^{\h}\right|$
\end_inset

 and each 
\begin_inset Formula $\left(V_{i}^{1},V_{i}^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(2\varepsilon',\delta''\right)$
\end_inset

-super-regular, for 
\begin_inset Formula $\delta''=\delta'/2$
\end_inset

.
 Combining the exceptional cluster 
\begin_inset Formula $V_{0}$
\end_inset

 and all the 
\begin_inset Formula $W_{i}^{\h}\backslash V_{i}^{\h}$
\end_inset

, there are at most 
\begin_inset Formula $2\varepsilon'n$
\end_inset

 
\begin_inset Quotes eld
\end_inset

bad
\begin_inset Quotes erd
\end_inset

 vertices not part of a super-regular pair.
\end_layout

\begin_layout Proof
Each bad vertex 
\begin_inset Formula $v$
\end_inset

 has at least 
\begin_inset Formula $\a'n-2\varepsilon'n$
\end_inset

 neighbours to the clusters 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

.
 The clusters 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

 which have fewer than 
\begin_inset Formula $\delta''\left|V_{i}^{\h}\right|$
\end_inset

 such neighbours contain at most 
\begin_inset Formula $\delta''n$
\end_inset

 of these neighbours.
 Each 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

 has size at most 
\begin_inset Formula $sn/\a'$
\end_inset

, so for small 
\begin_inset Formula $\varepsilon'$
\end_inset

 there are at least
\begin_inset Formula 
\[
\frac{\a'n-2\varepsilon'n-\delta''n}{sn/\a'}\ge\left(\a'\right)^{2}/\left(2s\right)
\]

\end_inset

clusters 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

 which have at least 
\begin_inset Formula $\delta''\left|V_{i}^{\h}\right|$
\end_inset

 neighbours of 
\begin_inset Formula $v$
\end_inset

.
 Pick one such 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

 uniformly at random, and put 
\begin_inset Formula $v$
\end_inset

 in 
\begin_inset Formula $V_{i}^{\flip{\h}}$
\end_inset

 (do this independently for each bad 
\begin_inset Formula $v$
\end_inset

).
 By a concentration inequality, after this procedure a.a.s.
 at most 
\begin_inset Formula $2\left(2\varepsilon'n\right)/\left(\left(\a'\right)^{2}/\left(2s\right)\right)\le\left(8\varepsilon'/\left(\a'\right)^{2}\right)\left|W_{i}^{\h}\right|\le\left(9\varepsilon'/\left(\a'\right)^{2}\right)\left|V_{i}^{\h}\right|$
\end_inset

 bad vertices have been added to each 
\begin_inset Formula $V_{i}^{\h}$
\end_inset

.
 By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:robust-regular"

\end_inset

, for small 
\begin_inset Formula $\varepsilon'$
\end_inset

 each 
\begin_inset Formula $\left(V_{i}^{1},V_{i}^{2}\right)$
\end_inset

 is now 
\begin_inset Formula $\left(O\left(\varepsilon'\right),\delta''/4\right)$
\end_inset

-super-regular.
 With 
\begin_inset Formula $\delta=\delta''/4$
\end_inset

 and 
\begin_inset Formula $\varepsilon'$
\end_inset

 small relative to 
\begin_inset Formula $\varepsilon$
\end_inset

, we are done.
\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\bi}{\mathbf{i}}
{\boldsymbol{\mathbf{i}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\bj}{\mathbf{j}}
{\boldsymbol{\mathbf{j}}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\br}{\mathbf{r}}
{\boldsymbol{\mathbf{r}}}
\end_inset


\end_layout

\begin_layout Standard
We apply 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:partition-into-blobs"

\end_inset

 to our graph 
\begin_inset Formula $\G$
\end_inset

, with 
\begin_inset Formula $\varepsilon_{1}=\varepsilon_{1}\left(\delta\right)$
\end_inset

 to be determined.
 For 
\begin_inset Formula $\bi=\left(i,\h\right)$
\end_inset

, let 
\begin_inset Formula $V_{\bi}=V_{i}^{\h}$
\end_inset

, and let 
\begin_inset Formula $\left|V_{\bi}\right|=s_{\bi}n$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Embedding a small subforest of 
\begin_inset Formula $\T$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:embed-forest"

\end_inset


\end_layout

\begin_layout Standard
Recall that a 
\emph on
bare path
\emph default
 in 
\begin_inset Formula $\T$
\end_inset

 is a path 
\begin_inset Formula $P$
\end_inset

 such that every vertex of 
\begin_inset Formula $P$
\end_inset

 has degree exactly two in 
\begin_inset Formula $\T$
\end_inset

.
 Proceeding with the proof outline, we need the fact that 
\begin_inset Formula $\T$
\end_inset

 is almost entirely composed of bare paths, as is guaranteed by the following
 lemma.
\end_layout

\begin_layout Lemma
\begin_inset Argument 1
status open

\begin_layout Plain Layout
\begin_inset CommandInset citation
LatexCommand cite
after "Lemma~2.1"
key "Kri10"

\end_inset


\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "lem:bare-paths-if-no-leaves"

\end_inset

Let 
\begin_inset Formula $\T$
\end_inset

 be a tree on 
\begin_inset Formula $n$
\end_inset

 vertices with at most 
\begin_inset Formula $\ell$
\end_inset

 leaves.
 Then 
\begin_inset Formula $\T$
\end_inset

 contains a collection of at least 
\begin_inset Formula $\left(n-\left(2\ell-2\right)\left(k+1\right)\right)/\left(k+1\right)$
\end_inset

 vertex-disjoint bare paths of length 
\begin_inset Formula $k$
\end_inset

 each.
\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\r}[1]{r\left(#1\right)}
{\boldsymbol{r\left(#1\right)}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\x}{x}
{\boldsymbol{x}}
\end_inset


\end_layout

\begin_layout Standard
\begin_inset FormulaMacro
\newcommand{\y}{y}
{\boldsymbol{y}}
\end_inset


\end_layout

\begin_layout Standard
In our case 
\begin_inset Formula $\ell=\lambda n$
\end_inset

.
 If we choose 
\begin_inset Formula $k$
\end_inset

 large enough and 
\begin_inset Formula $\lambda$
\end_inset

 small enough, then 
\begin_inset Formula $\T$
\end_inset

 contains a collection of 
\begin_inset Formula $n/\left(2\left(k-1\right)\right)$
\end_inset

 disjoint bare 
\begin_inset Formula $k$
\end_inset

-paths.
 (The definite value of 
\begin_inset Formula $k$
\end_inset

 will be determined later; it will depend on 
\begin_inset Formula $\a$
\end_inset

 but not 
\begin_inset Formula $\varepsilon$
\end_inset

).
 If we delete the interior vertices of these paths, then we are left with
 a forest 
\begin_inset Formula $\F$
\end_inset

 on 
\begin_inset Formula $n/2$
\end_inset

 vertices.
\end_layout

\begin_layout Standard
Now, embed 
\begin_inset Formula $\F$
\end_inset

 into 
\begin_inset Formula $\R_{1}$
\end_inset

.
 There are 
\begin_inset Formula $n/\left(2\left(k-1\right)\right)$
\end_inset

 
\begin_inset Quotes eld
\end_inset

special pairs
\begin_inset Quotes erd
\end_inset

 of 
\begin_inset Quotes eld
\end_inset

special vertices
\begin_inset Quotes erd
\end_inset

 of 
\begin_inset Formula $\F\subseteq\R_{1}$
\end_inset

 that need to be connected with 
\begin_inset Formula $k$
\end_inset

-paths.
 We call such connecting paths 
\begin_inset Quotes eld
\end_inset

special paths
\begin_inset Quotes erd
\end_inset

.
 Let 
\begin_inset Formula $X\subseteq V$
\end_inset

 be the set of special vertices and let 
\begin_inset Formula $W=V\backslash\F$
\end_inset

 be the set of 
\begin_inset Quotes eld
\end_inset

free
\begin_inset Quotes erd
\end_inset

 vertices.
 By symmetry we can assume 
\begin_inset Formula 
\[
X\,\cup\,W\,\cup\,V\backslash\F
\]

\end_inset

is a uniformly random partition of 
\begin_inset Formula $V$
\end_inset

 into parts of sizes 
\begin_inset Formula $n/\left(k-1\right)$
\end_inset

, 
\begin_inset Formula $n/2-n/\left(k-1\right)$
\end_inset

 and 
\begin_inset Formula $n/2$
\end_inset

 respectively.
 We can also assume that the special pairs correspond to a uniformly random
 partition of 
\begin_inset Formula $X$
\end_inset

 into pairs.
 Note that 
\begin_inset Formula $2\left|W\right|=\left(k-1\right)\left|X\right|$
\end_inset

.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $X_{\bi}=V_{\bi}\cap X$
\end_inset

 and 
\begin_inset Formula $W_{\bi}=V_{\bi}\backslash F$
\end_inset

 be the set of 
\begin_inset Quotes eld
\end_inset

free
\begin_inset Quotes erd
\end_inset

 vertices remaining in 
\begin_inset Formula $V_{\bi}$
\end_inset

.
 By a concentration inequality for the hypergeometric distribution and the
 union bound, a.a.s.
 each 
\begin_inset Formula $\left|W_{\bi}\right|\sim s_{\bi}n/2$
\end_inset

 and 
\begin_inset Formula $\left|X_{\bi}\right|\sim s_{\bi}n/\left(k-1\right)$
\end_inset

.
\end_layout

\begin_layout Standard
Here and in future parts of the proof, it is critical that these kinds of
 random subsets of our super-regular pairs maintain super-regularity (albeit
 with slightly weaker 
\begin_inset Formula $\varepsilon$
\end_inset

 and 
\begin_inset Formula $\delta$
\end_inset

).
 We will ensure this by appealing to the following lemma.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:random-preserves-superregular"

\end_inset

Fix 
\begin_inset Formula $\delta,\varepsilon'>0$
\end_inset

.
 There is 
\begin_inset Formula $\varepsilon=\varepsilon\left(\varepsilon'\right)>0$
\end_inset

 such that the following holds.
 Suppose 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 is 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense, let 
\begin_inset Formula $n_{\h}$
\end_inset

 satisfy 
\begin_inset Formula $\left|V^{\h}\right|\ge n_{\h}=\Omega$
\end_inset


\begin_inset Formula $\left(n\right)$
\end_inset

 (not necessarily uniformly over 
\begin_inset Formula $\varepsilon$
\end_inset

 and 
\begin_inset Formula $\delta$
\end_inset

) and for each 
\begin_inset Formula $\h$
\end_inset

 let 
\begin_inset Formula $W^{\h}\subseteq V^{\h}$
\end_inset

 be a uniformly random subset of size 
\begin_inset Formula $n_{\h}$
\end_inset

.
 Then 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is a.a.s.
 
\begin_inset Formula $\left(\varepsilon',\delta/2\right)$
\end_inset

-dense.
 If moreover 
\begin_inset Formula $\left(V^{1},V^{2}\right)$
\end_inset

 was 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular then 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is a.a.s.
 
\begin_inset Formula $\left(\varepsilon',\delta/2\right)$
\end_inset

-super-regular.
\end_layout

\begin_layout Standard
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset

 is a simple consequence of a highly nontrivial (and much more general)
 result in 
\begin_inset CommandInset citation
LatexCommand cite
key "GKRS07"

\end_inset

, which shows that small random subsets inherit certain regularity-like
 properties with very high probability.
 The notion of 
\begin_inset Quotes eld
\end_inset

lower regularity
\begin_inset Quotes erd
\end_inset

 in that paper essentially corresponds to our notion of 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-density.
\end_layout

\begin_layout Proof
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset


\end_layout

\end_inset

The fact that 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is a.a.s.
 
\begin_inset Formula $\left(\varepsilon',\delta/2\right)$
\end_inset

-dense for suitable 
\begin_inset Formula $\varepsilon$
\end_inset

, follows from two applications of 
\begin_inset CommandInset citation
LatexCommand cite
after "Theorem~3.6"
key "GKRS07"

\end_inset

.
\end_layout

\begin_layout Proof
It remains to consider the degree condition for super-regularity.
 For each 
\begin_inset Formula $v\in W^{\h}$
\end_inset

, the number of neighbours of 
\begin_inset Formula $v\in W^{\flip{\h}}$
\end_inset

 is hypergeometrically distributed, with expected value at least 
\begin_inset Formula $\delta n_{\flip{\h}}$
\end_inset

.
 Since 
\begin_inset Formula $n_{\flip h}=\Omega\left(n\right)$
\end_inset

, a concentration inequality and the union bound immediately tells us that
 a.a.s.
 each such 
\begin_inset Formula $v$
\end_inset

 has 
\begin_inset Formula $\delta n_{\flip h}/2$
\end_inset

 such neighbours.
 This proves that 
\begin_inset Formula $\left(W^{1},W^{2}\right)$
\end_inset

 is a.a.s.
 
\begin_inset Formula $\left(\varepsilon',\delta/2\right)$
\end_inset

-super-regular.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\flip{\left(i,\h\right)}=\left(i,\flip{\h}\right)$
\end_inset

, and let 
\begin_inset Formula $\left[\left(i,\h\right)\right]=i$
\end_inset

.
 It is an immediate consequence of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset

 that each 
\begin_inset Formula $\left(X_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 are 
\begin_inset Formula $\left(\varepsilon_{2},\delta_{2}\right)$
\end_inset

-super-regular, where 
\begin_inset Formula $\delta_{2}=\delta_{1}/2$
\end_inset

 and 
\begin_inset Formula $\varepsilon_{2}$
\end_inset

 can be made arbitrarily small by choice of 
\begin_inset Formula $\varepsilon_{1}$
\end_inset

.
\end_layout

\begin_layout Standard
Now that we have embedded 
\begin_inset Formula $\F$
\end_inset

, we no longer care about the vertices used to embed 
\begin_inset Formula $\F\backslash X$
\end_inset

; they will never be used again.
 It is convenient to imagine, for the duration of the proof, that instead
 of embedding parts of 
\begin_inset Formula $\T$
\end_inset

, we are 
\begin_inset Quotes eld
\end_inset

removing
\begin_inset Quotes erd
\end_inset

 vertices from 
\begin_inset Formula $\G\cup\R$
\end_inset

, gradually making the remaining graph easier to deal with.
 So, update 
\begin_inset Formula $n$
\end_inset

 to be the number of vertices not used to embed 
\begin_inset Formula $\F\backslash X$
\end_inset

 (previously 
\begin_inset Formula $\left(1/2+1/\left(k-1\right)\right)n$
\end_inset

), and update 
\begin_inset Formula $s_{\bi}$
\end_inset

 to satisfy 
\begin_inset Formula $\left|W_{\bi}\right|=s_{\bi}n$
\end_inset

.
 Note that (asymptotically speaking) this just rescales the 
\begin_inset Formula $s_{\bi}$
\end_inset

 so that they sum to 
\begin_inset Formula $\left(\left(k-1\right)/\left(k+1\right)\right)n$
\end_inset

.
 Therefore the variation between the 
\begin_inset Formula $s_{\bi}$
\end_inset

 is still bounded independently of 
\begin_inset Formula $\varepsilon$
\end_inset

.
 We then have 
\begin_inset Formula $\left|X_{\bi}\right|\sim2s_{\bi}n/\left(k-1\right)$
\end_inset

 for each 
\begin_inset Formula $\bi$
\end_inset

, and there are 
\begin_inset Formula $n/\left(k+1\right)$
\end_inset

 special pairs.
\end_layout

\begin_layout Subsubsection
\begin_inset CommandInset label
LatexCommand label
name "sub:fix-endpoints"

\end_inset

Fixing the endpoints of the special paths
\end_layout

\begin_layout Standard
We will eventually need to start finding and removing special paths between
 our special pairs.
 For this, we would like the special pairs to be 
\begin_inset Quotes eld
\end_inset

between partner clusters
\begin_inset Quotes erd
\end_inset

, so that we can take advantage of the super-regularity in 
\begin_inset Formula $\G$
\end_inset

.
 Therefore, for every special pair 
\begin_inset Formula $\left\{ \x,\y\right\} $
\end_inset

, we will find very short (length-2) paths from 
\begin_inset Formula $\x$
\end_inset

 to some vertex 
\begin_inset Formula $\x'\in W_{\br}$
\end_inset

 and from 
\begin_inset Formula $\y$
\end_inset

 to some 
\begin_inset Formula $\y\in W_{\flip{\br}}$
\end_inset

, for some 
\begin_inset Formula $\br$
\end_inset

.
 This effectively 
\begin_inset Quotes eld
\end_inset

moves
\begin_inset Quotes erd
\end_inset

 the special pair 
\begin_inset Formula $\left\{ \x,\y\right\} $
\end_inset

 to 
\begin_inset Formula $\left\{ \x',\y'\right\} $
\end_inset

: to complete the embedding we now need to find length-
\begin_inset Formula $\left(k-4\right)$
\end_inset

 special paths connecting the new special pairs.
\end_layout

\begin_layout Standard
The choice of 
\begin_inset Quotes eld
\end_inset

destination
\begin_inset Quotes erd
\end_inset

 
\begin_inset Formula $\left\{ W_{\br},W_{\flip{\br}}\right\} $
\end_inset

 for each special pair can be almost arbitrary, so long as we distribute
 the special pairs roughly evenly between the 
\begin_inset Formula $W_{\bi}$
\end_inset

.
 An easy way to do this is to distribute our special pairs randomly.
 For a special pair 
\begin_inset Formula $\left\{ \x,\y\right\} $
\end_inset

 with 
\begin_inset Formula $\x\in X_{\bi}$
\end_inset

 and 
\begin_inset Formula $y\in X_{\bj}$
\end_inset

, uniformly at random choose some 
\begin_inset Formula $\br$
\end_inset

.
 Let 
\begin_inset Formula $a=\min_{\bi}\left|W_{\bi}\right|/n$
\end_inset

, so that 
\begin_inset Formula $\x$
\end_inset

 has at least 
\begin_inset Formula $\delta_{2}an>\left(\delta_{2}a/2\right)n$
\end_inset

 neighbours in 
\begin_inset Formula $W_{\bi}$
\end_inset

 and 
\begin_inset Formula $\y$
\end_inset

 has at least 
\begin_inset Formula $\delta_{2}an>\left(\delta_{2}a/2\right)n$
\end_inset

 neighbours in 
\begin_inset Formula $W_{\bj}$
\end_inset

.
 Now, note that (if 
\begin_inset Formula $\c_{3}$
\end_inset

 is large), there is a.a.s.
 an edge in 
\begin_inset Formula $\R_{3}$
\end_inset

 between any pair of disjoint sets of size 
\begin_inset Formula $\left(\delta_{2}a/2\right)n$
\end_inset

 (the proof of this is basically identical to the proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:bipartite-matching"

\end_inset

).
 Certainly each 
\begin_inset Formula $\left|W_{\bi}\right|\ge\left(\delta_{2}a/2\right)n$
\end_inset

, so there is an edge between 
\begin_inset Formula $N\left(\x\right)\cap W_{\flip{\bi}}$
\end_inset

 and 
\begin_inset Formula $W_{\br}$
\end_inset

 (respectively, between 
\begin_inset Formula $N\left(\y\right)\cap W_{\flip{\bj}}$
\end_inset

 and 
\begin_inset Formula $W_{\flip{\br}}$
\end_inset

), giving length-2 paths between 
\begin_inset Formula $\x$
\end_inset

 and some 
\begin_inset Formula $\x'\in W_{\br}$
\end_inset

, and between 
\begin_inset Formula $\y$
\end_inset

 and some 
\begin_inset Formula $\y'\in W_{\flip{\br}}$
\end_inset

.
 We can then remove 
\begin_inset Formula $\x$
\end_inset

, 
\begin_inset Formula $\y$
\end_inset

 and the two vertices used in 
\begin_inset Formula $W_{\flip{\bi}}$
\end_inset

 and 
\begin_inset Formula $W_{\flip{\bj}}$
\end_inset

.
\end_layout

\begin_layout Standard
We claim that for large 
\begin_inset Formula $k$
\end_inset

 we can a.a.s.
 repeat this procedure for every special pair.
 Indeed, the only issue would be if we tried to take more than 
\begin_inset Formula $\left(\delta_{2}a/2\right)n$
\end_inset

 vertices from some 
\begin_inset Formula $W_{\flip{\bi}}$
\end_inset

, for then we would no longer be able to guarantee that each 
\begin_inset Formula $\x$
\end_inset

, 
\begin_inset Formula $\y$
\end_inset

 has enough neighbours in the appropriate cluster.
 But by the Chernoff bound we will a.a.s.
 only try to take 
\begin_inset Formula 
\[
\left|X_{\flip{\bi}}\right|+\left(1+o\left(1\right)\right)\left|X\right|/\left(2q\right)\sim2\left(s_{\bar{\bi}}+s\right)n/\left(k-1\right)
\]

\end_inset

vertices from each 
\begin_inset Formula $W_{\bi}$
\end_inset

, where 
\begin_inset Formula $s=\left(\left(k-1\right)/\left(k+1\right)\right)/2q$
\end_inset

 is the average 
\begin_inset Formula $s_{\bi}$
\end_inset

 (recall that 
\begin_inset Formula $q$
\end_inset

 is the number of pairs of partner clusters).
 For large 
\begin_inset Formula $k$
\end_inset

 this is fewer than 
\begin_inset Formula $\left(\delta_{2}a/2\right)n$
\end_inset

 vertices.
 Since the variation in the 
\begin_inset Formula $s_{\bi}$
\end_inset

 is bounded independently of 
\begin_inset Formula $\varepsilon$
\end_inset

, also 
\begin_inset Formula $k$
\end_inset

 is independent of 
\begin_inset Formula $\varepsilon$
\end_inset

.
\end_layout

\begin_layout Standard
Redefine 
\begin_inset Formula $X_{\bi}$
\end_inset

 to be the set of new special vertices taken from 
\begin_inset Formula $W_{\bi}$
\end_inset

, so that all the special pairs are now between some 
\begin_inset Formula $X_{\bi}$
\end_inset

 and 
\begin_inset Formula $X_{\flip{\bi}}$
\end_inset

.
 Let 
\begin_inset Formula $Z_{\left[\bi\right]}=Z_{\left[\flip{\bi}\right]}$
\end_inset

 be the set of such pairs (recall that 
\begin_inset Formula $\left[\left(i,\h\right)\right]=i$
\end_inset

), and let 
\begin_inset Formula $Z=\bigcup_{i}Z_{i}$
\end_inset

 be the set of all special pairs.
 By symmetry (considering permutations of 
\begin_inset Formula $W_{\bi}$
\end_inset

 with 
\begin_inset CommandInset ref
LatexCommand ref
reference "rem:symmetry"

\end_inset

), we can assume 
\begin_inset Formula $X_{\bi}$
\end_inset

 is a uniformly random subset of 
\begin_inset Formula $W_{\bi}$
\end_inset

 of its size, so by 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset

 each 
\begin_inset Formula $\left(X_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 is a.a.s.
 
\begin_inset Formula $\left(\varepsilon_{3},\delta_{3}\right)$
\end_inset

-super-regular, where 
\begin_inset Formula $\delta_{3}=\delta_{2}/2$
\end_inset

 and 
\begin_inset Formula $\varepsilon_{3}$
\end_inset

 can be arbitrarily small respective to 
\begin_inset Formula $\delta_{3}$
\end_inset

.
\end_layout

\begin_layout Standard
Also, update 
\begin_inset Formula $W_{\bi}$
\end_inset

 by removing all deleted vertices and all new special vertices.
 For large 
\begin_inset Formula $k$
\end_inset

, we are deleting such a small fraction of each 
\begin_inset Formula $W_{\bi}$
\end_inset

 that each 
\begin_inset Formula $\left(X_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 are still 
\begin_inset Formula $\left(2\varepsilon_{3},\delta_{3}/2\right)$
\end_inset

-super-regular.
\end_layout

\begin_layout Standard
We update all the other variables as before: redefine 
\begin_inset Formula $X=\bigcup_{\bi}X_{\bi}$
\end_inset

 and 
\begin_inset Formula $W=\bigcup_{\bi}W_{\bi}$
\end_inset

, update 
\begin_inset Formula $n$
\end_inset

 to be the number of vertices in 
\begin_inset Formula $X\cup W$
\end_inset

 (previously 
\begin_inset Formula $n-4n/\left(k+1\right)$
\end_inset

), and redefine the 
\begin_inset Formula $s_{\bi}$
\end_inset

 to still satisfy 
\begin_inset Formula $\left|W_{\bi}\right|=s_{\bi}n$
\end_inset

.
 Provided 
\begin_inset Formula $k$
\end_inset

 is large, we have changed the 
\begin_inset Formula $s_{\bi}$
\end_inset

 very little, so still the variation between the 
\begin_inset Formula $s_{\bi}$
\end_inset

 is bounded independently of 
\begin_inset Formula $\varepsilon$
\end_inset

.
 Also, update 
\begin_inset Formula $k$
\end_inset

 to be the new required length of special paths (previously 
\begin_inset Formula $k-4$
\end_inset

), so we still have 
\begin_inset Formula $\left|Z\right|=2\left|W\right|=\left(k-1\right)\left|X\right|$
\end_inset

.
 With 
\begin_inset Formula $s$
\end_inset

 updated to still be the average 
\begin_inset Formula $s_{\bi}$
\end_inset

, each 
\begin_inset Formula $\left|X_{\bi}\right|\sim2sn/\left(k-1\right)$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Adjusting the relative sizes of the clusters
\begin_inset CommandInset label
LatexCommand label
name "sub:cluster-adjustment"

\end_inset


\end_layout

\begin_layout Standard
The next step is to use the random edges in 
\begin_inset Formula $\R_{4}$
\end_inset

 to start removing special paths.
 Our objective is to do this in such a way that after we have removed the
 vertices in those paths from the 
\begin_inset Formula $X_{\bi}$
\end_inset

 and 
\begin_inset Formula $W_{\bi}$
\end_inset

,  we will have 
\begin_inset Formula $2\left|W_{\bi}\right|=\left(k-1\right)\left|X_{\bi}\right|$
\end_inset

 for each 
\begin_inset Formula $\bi$
\end_inset

.
 We require this to apply the blow-up lemma in the final step.
\end_layout

\begin_layout Standard
The way we will remove special paths is with 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset

, to follow.
\end_layout

\begin_layout Standard
A 
\begin_inset Quotes eld
\end_inset

special sequence
\begin_inset Quotes erd
\end_inset

 is a sequence of vertices 
\begin_inset Formula $\x,w_{1},\dots,w_{k-1},\y$
\end_inset

, such that 
\begin_inset Formula $\left\{ \x,\y\right\} $
\end_inset

 is a special pair and each 
\begin_inset Formula $w_{j}$
\end_inset

 is in some 
\begin_inset Formula $W_{\bi}$
\end_inset

.
 We also define an equivalence relation on special sequences: two special
 sequences 
\begin_inset Formula $\x,w_{1},\dots,w_{k-1},\y$
\end_inset

 and and 
\begin_inset Formula $\x',w_{1}',\dots,w_{k-1}',\y'$
\end_inset

 are equivalent if 
\begin_inset Formula $\x$
\end_inset

 and 
\begin_inset Formula $\x'$
\end_inset

 are in the same cluster 
\begin_inset Formula $X_{\bi}$
\end_inset

 (therefore 
\begin_inset Formula $\y,\y'\in X_{\flip{\bi}}$
\end_inset

), and if 
\begin_inset Formula $w_{j}$
\end_inset

 and 
\begin_inset Formula $w_{j}'$
\end_inset

 are in the same cluster 
\begin_inset Formula $W_{\bi_{j}}$
\end_inset

 for all 
\begin_inset Formula $j$
\end_inset

.
 A 
\begin_inset Quotes eld
\end_inset

template
\begin_inset Quotes erd
\end_inset

 is an equivalence class of special sequences, or equivalently a sequence
 of clusters 
\begin_inset Formula $X_{\bi},W_{\bi_{1}},\dots,W_{\bi_{k-1}},X_{\flip{\bi}}$
\end_inset

 (repetitions permitted).
 The sequence of vertices in any special path is a special sequence, so
 we can classify special paths by their template.
 The idea is that we can specify desired quantities of special paths correspondi
ng to each template, and provided certain conditions are satisfied we can
 find special paths with these templates, using the remaining vertices in
 
\begin_inset Formula $\G\cup\R_{4}$
\end_inset

.
\end_layout

\begin_layout Standard
Say a special sequence 
\begin_inset Formula $\x,w_{1},\dots,w_{k-1},\y$
\end_inset

 with 
\begin_inset Formula $\x\in X_{\bi}$
\end_inset

 and 
\begin_inset Formula $\y\in X_{\flip{\bi}}$
\end_inset

 is 
\begin_inset Quotes eld
\end_inset

good
\begin_inset Quotes erd
\end_inset

 if 
\begin_inset Formula $w_{1}\in W_{\flip{\bi}}$
\end_inset

 and 
\begin_inset Formula $w_{k-1}\in W_{\bi}$
\end_inset

.
 We make similar definitions for good special paths and good templates.
 It is easier to find good special paths because we can take advantage of
 super-regularity at the beginning and end of the path.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:adjusting-paths"

\end_inset

For any 
\begin_inset Formula $a,\delta,\gamma,\varepsilon''>0$
\end_inset

, and any integers 
\begin_inset Formula $Q$
\end_inset

 and 
\begin_inset Formula $k>2$
\end_inset

, there are 
\begin_inset Formula $\varepsilon=\varepsilon\left(\delta,\gamma,\varepsilon''\right)$
\end_inset

 and 
\begin_inset Formula $\c=\c\left(a,\delta,\gamma,\varepsilon'',M,k\right)$
\end_inset

 such that the following holds.
\end_layout

\begin_layout Lemma
Let 
\begin_inset Formula $\G$
\end_inset

 be a graph on some vertex set 
\begin_inset Formula $\range n$
\end_inset

.
 Suppose the vertices of 
\begin_inset Formula $\G$
\end_inset

 are partitioned into clusters 
\begin_inset Formula $X_{\bi},W_{\bi}$
\end_inset

 for 
\begin_inset Formula $\bi\in\left[q\right]\times\left[2\right]$
\end_inset

 with 
\begin_inset Formula $q\le Q$
\end_inset

, and suppose that each cluster has at least 
\begin_inset Formula $an$
\end_inset

 vertices.
 Suppose further that each 
\begin_inset Formula $\x\in X_{\bi}$
\end_inset

 is bijectively paired with a vertex 
\begin_inset Formula $\y\in X_{\flip{\bi}}$
\end_inset

 comprising a special pair 
\begin_inset Formula $\left\{ \x,\y\right\} $
\end_inset

.
 Finally, suppose that each 
\begin_inset Formula $\left(X_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 are 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular.
\end_layout

\begin_layout Lemma
Suppose we specify a desired number of special paths with each good template,
 in such a way that we would be taking no more than 
\begin_inset Formula $\left(1-\gamma\right)\left|X_{\bi}\right|$
\end_inset

 (respectively 
\begin_inset Formula $\left(1-\gamma\right)\left|W_{\bi}\right|$
\end_inset

) vertices from each 
\begin_inset Formula $X_{\bi}$
\end_inset

 (respectively 
\begin_inset Formula $W_{\bi}$
\end_inset

).
 Then we can find special paths in 
\begin_inset Formula $\G\cup\R$
\end_inset

 with our desired templates in such a way that after their removal, each
 
\begin_inset Formula $\left(X_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 are still 
\begin_inset Formula $\left(\varepsilon'',\delta/8\right)$
\end_inset

-super-regular.
\end_layout

\begin_layout Standard
We will prove 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset

 with two successively simpler lemmas.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:adjusting-paths-basic"

\end_inset

For any 
\begin_inset Formula $b\delta,\xi>0$
\end_inset

 and any integer 
\begin_inset Formula $k>2$
\end_inset

, there are 
\begin_inset Formula $\varepsilon\left(\delta,\xi\right)>0$
\end_inset

 and 
\begin_inset Formula $\c=\c\left(b,\delta,\xi,k\right)$
\end_inset

 such that the following holds.
\end_layout

\begin_layout Lemma
Let 
\begin_inset Formula $\G$
\end_inset

 be a graph on some vertex set 
\begin_inset Formula $\range N$
\end_inset

 (
\begin_inset Formula $n\ge bN$
\end_inset

), together with a vertex partition into clusters.
 Consider a sequence of clusters 
\begin_inset Formula $X,W_{1},\dots,W_{r},Y$
\end_inset

 (some clusters may be repeated), such that 
\begin_inset Formula $\left|X\right|,\left|Y\right|\ge n$
\end_inset

 and if 
\begin_inset Formula $W_{i}$
\end_inset

 appears 
\begin_inset Formula $t_{i}$
\end_inset

 times in the sequence then 
\begin_inset Formula $\left|W_{i}\right|\ge t_{i}n$
\end_inset

.
 Suppose that 
\begin_inset Formula $\left(X,W_{1}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{k-1},Y\right)$
\end_inset

 are 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense, and that each 
\begin_inset Formula $\x\in X$
\end_inset

 is bijectively paired with a vertex 
\begin_inset Formula $\y\in Y$
\end_inset

, comprising a special pair 
\begin_inset Formula $\left(\x,\y\right)$
\end_inset

.
 Let 
\begin_inset Formula $\R\in\GG\left(N,\c/N\right)$
\end_inset

; then in 
\begin_inset Formula $\G\cup\R$
\end_inset

 we can find 
\begin_inset Formula $\left(1-\xi\right)n$
\end_inset

 vertex-disjoint special paths, each with 
\begin_inset Formula $t_{i}$
\end_inset

 vertices in each 
\begin_inset Formula $W_{i}$
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:adjusting-paths-more-basic"

\end_inset

For any 
\begin_inset Formula $\delta,\xi>0$
\end_inset

 and any integer 
\begin_inset Formula $k>2$
\end_inset

, there are 
\begin_inset Formula $\varepsilon\left(\delta,\xi\right)>0$
\end_inset

 and 
\begin_inset Formula $\c=\c\left(\delta,\xi,k\right)$
\end_inset

 such that the following holds.
\end_layout

\begin_layout Lemma
Let 
\begin_inset Formula $\G$
\end_inset

 be a graph on the vertex set 
\begin_inset Formula $\range{kn}$
\end_inset

, together with a vertex partition into disjoint clusters 
\begin_inset Formula $X,W_{1}\dots,W_{k-1},Y$
\end_inset

, such that each 
\begin_inset Formula $\left|W_{i}\right|=n$
\end_inset

.
 Suppose that 
\begin_inset Formula $\left(W,V_{1}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{k-1},Y\right)$
\end_inset

 are 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-dense and that each 
\begin_inset Formula $\x\in X$
\end_inset

 is bijectively paired with a vertex 
\begin_inset Formula $\y\in Y$
\end_inset

, comprising a special pair 
\begin_inset Formula $\left(\x,\y\right)$
\end_inset

.
 Let 
\begin_inset Formula $\R\in\GG\left(kn,\c/n\right)$
\end_inset

; then in 
\begin_inset Formula $\G\cup\R$
\end_inset

 we can find 
\begin_inset Formula $\left(1-\xi\right)n$
\end_inset

 vertex-disjoint special paths running through 
\begin_inset Formula $X,W_{1},\dots,W_{k-1},Y$
\end_inset

 in order.
\end_layout

\begin_layout Proof
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths-more-basic"

\end_inset


\end_layout

\end_inset

By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:bipartite-matching"

\end_inset

, in 
\begin_inset Formula $\R$
\end_inset

 we can a.a.s.
 find a matching of 
\begin_inset Formula $\left(1-\varepsilon/\left(k-2\right)\right)n$
\end_inset

 edges between each 
\begin_inset Formula $W_{i}$
\end_inset

 and 
\begin_inset Formula $W_{i+1}$
\end_inset

 (
\begin_inset Formula $1\le i<k-1$
\end_inset

).
 The union of these matchings contains at least 
\begin_inset Formula $\left(1-\varepsilon\right)n$
\end_inset

 disjoint length-
\begin_inset Formula $\left(k-2\right)$
\end_inset

 paths 
\begin_inset Formula $P_{i},\dots,P_{\left(1-\varepsilon\right)n}$
\end_inset

 running through 
\begin_inset Formula $W_{1},\dots,W_{k-1}$
\end_inset

; we write 
\begin_inset Formula $P_{j}=w_{1}^{j}\dots w_{k-1}^{j}$
\end_inset

 with each 
\begin_inset Formula $w_{i}\in W_{i}$
\end_inset

.
 We can assume these paths are uniformly random: that is, for each 
\begin_inset Formula $i$
\end_inset

, the function 
\begin_inset Formula $j\mapsto w_{i}^{j}$
\end_inset

 is a uniformly random injection from 
\begin_inset Formula $\left[\left(1-\varepsilon\right)n\right]$
\end_inset

 into 
\begin_inset Formula $W_{i}$
\end_inset

, independent for each 
\begin_inset Formula $i$
\end_inset

.
\end_layout

\begin_layout Proof
Consider a 
\begin_inset Formula $\left(\xi-\varepsilon\right)n$
\end_inset

-element subset 
\begin_inset Formula $J$
\end_inset

 of 
\begin_inset Formula $\left[\left(1-\varepsilon\right)n\right]$
\end_inset

, and consider a 
\begin_inset Formula $\xi n$
\end_inset

-element subset 
\begin_inset Formula $Z$
\end_inset

 of the special pairs.
 We would like to find a special path using one of the special pairs in
 
\begin_inset Formula $Z$
\end_inset

 and one of the paths 
\begin_inset Formula $P_{j}$
\end_inset

, for 
\begin_inset Formula $j\in J$
\end_inset

.
 If we could (a.a.s.) find such a special path for all such subsets 
\begin_inset Formula $J$
\end_inset

 and 
\begin_inset Formula $Z$
\end_inset

 then we would be done, for we would be able to choose our desired 
\begin_inset Formula $\left(1-\xi\right)n$
\end_inset

 graded special paths greedily.
 That is, given a collection of fewer than 
\begin_inset Formula $\left(1-\xi\right)n$
\end_inset

 disjoint special paths running through the clusters, we could find an additiona
l disjoint special path with the leftover vertices.
\end_layout

\begin_layout Proof
Let 
\begin_inset Formula $X'\subseteq X$
\end_inset

 and 
\begin_inset Formula $Y'\subseteq Y$
\end_inset

 be the subsets containing the special vertices in the special pairs in
 
\begin_inset Formula $Z$
\end_inset

, and condition on each of the 
\begin_inset Formula $w_{1}^{j}$
\end_inset

.
 Let 
\begin_inset Formula $N_{j}^{X}$
\end_inset

 be the set of neighbours of 
\begin_inset Formula $w_{1}^{j}$
\end_inset

 in 
\begin_inset Formula $X'$
\end_inset

 and let 
\begin_inset Formula $N_{j}^{Y}$
\end_inset

 be the vertices of 
\begin_inset Formula $Y'$
\end_inset

 which form special pairs with the vertices in 
\begin_inset Formula $N_{j}^{X}$
\end_inset

.
 Let 
\begin_inset Formula $N_{j}^{W}$
\end_inset

 be the set of neighbours of 
\begin_inset Formula $N_{j}^{Y}$
\end_inset

 in 
\begin_inset Formula $W_{k-1}$
\end_inset

.
 If we had 
\begin_inset Formula $w_{j}^{1}\in N_{j}^{W}$
\end_inset

 for some 
\begin_inset Formula $j$
\end_inset

, that would mean there is a special pair 
\begin_inset Formula $\left(\x,\y\right)\in Z$
\end_inset

 with 
\begin_inset Formula $\x$
\end_inset

 adjacent to 
\begin_inset Formula $w_{1}^{j}$
\end_inset

 and 
\begin_inset Formula $\y$
\end_inset

 adjacent to 
\begin_inset Formula $w_{k-1}^{j}$
\end_inset

; this gives us a special path 
\begin_inset Formula $\x w_{1}^{j}\dots w_{k-1}^{j}\y$
\end_inset

 as desired.
\end_layout

\begin_layout Proof
By 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-denseness (with 
\begin_inset Formula $\varepsilon\le\xi$
\end_inset

) there are at most 
\begin_inset Formula $\varepsilon n$
\end_inset

 indices 
\begin_inset Formula $j\in J$
\end_inset

 such that 
\begin_inset Formula $w_{1}^{j}$
\end_inset

 has fewer than 
\begin_inset Formula $\delta\xi n$
\end_inset

 neighbours in 
\begin_inset Formula $X'$
\end_inset

.
 Let 
\begin_inset Formula $J'$
\end_inset

 be the set of indices 
\begin_inset Formula $j\in J$
\end_inset

 such that 
\begin_inset Formula $\left|N_{j}^{X}\right|\ge\varepsilon n$
\end_inset

.
 For small 
\begin_inset Formula $\varepsilon$
\end_inset

 we have
\begin_inset Formula $\delta\xi n\ge\varepsilon n$
\end_inset

 and 
\begin_inset Formula $\varepsilon n\le\xi n/2$
\end_inset

, so 
\begin_inset Formula $\left|J'\right|\ge\xi n/2$
\end_inset

.
 Now, again using 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-denseness there is an edge between each set of 
\begin_inset Formula $\varepsilon n$
\end_inset

 vertices of 
\begin_inset Formula $Y'$
\end_inset

 and each set of 
\begin_inset Formula $\varepsilon n$
\end_inset

 vertices of 
\begin_inset Formula $W_{k-1}$
\end_inset

, so if 
\begin_inset Formula $j\in J'$
\end_inset

 then 
\begin_inset Formula $\left|N_{j}^{W}\right|\ge\left(1-\varepsilon\right)n$
\end_inset

 (that is, the set 
\begin_inset Formula $N_{j}^{Y}$
\end_inset

, which has at least 
\begin_inset Formula $\varepsilon n$
\end_inset

 elements, has at least 
\begin_inset Formula $\left(1-\varepsilon\right)n$
\end_inset

 neighbours in 
\begin_inset Formula $W_{k-1}$
\end_inset

).
 We want to estimate the probability that 
\begin_inset Formula $w_{k-1}^{j}\notin N_{j}^{W}$
\end_inset

 for all 
\begin_inset Formula $j\in J'$
\end_inset

; this is the probability that we fail to find a suitable special pair.
\end_layout

\begin_layout Proof
There are at most 
\begin_inset Formula $\left(\varepsilon n\right)^{\left|J'\right|}$
\end_inset

 possibilities for the function 
\begin_inset Formula $j\mapsto w_{k-1}^{j}$
\end_inset

 (restricted to the domain 
\begin_inset Formula $J'$
\end_inset

) that fail in this way.
 The probability that the random injection 
\begin_inset Formula $j\mapsto w_{k-1}^{j}$
\end_inset

 (
\begin_inset Formula $\left[\left(1-\varepsilon\right)n\right]\to W_{k-1}$
\end_inset

) is unfavourable is therefore at most
\begin_inset Formula 
\[
\frac{\left(\varepsilon n\right)^{\left|J'\right|}\left(n-\left|J'\right|\right)!}{n!}=O\left(\left(\varepsilon e\right)^{\left|J'\right|}\right)=e^{-\Omega\left(\xi\log\left(1/\varepsilon'\right)n\right)}.
\]

\end_inset

(We have used Stirling's approximation and the fact that we can obtain a
 uniformly random injection 
\begin_inset Formula $\left[\left(1-\varepsilon\right)n\right]\to W_{k-1}$
\end_inset

 from a uniformly random bijection 
\begin_inset Formula $\left[n\right]\to W_{k-1}$
\end_inset

).
 There are 
\begin_inset Formula 
\[
{n \choose \left(\xi-\varepsilon'\right)n}{n \choose \xi n}=e^{O\left(\xi\log\left(1/\xi\right)n\right)}
\]

\end_inset

possible choices of 
\begin_inset Formula $J$
\end_inset

 and 
\begin_inset Formula $Z$
\end_inset

 (we have used the binary entropy approximation for binomial coefficients)
 so if we choose 
\begin_inset Formula $\varepsilon\le\xi^{1/M}$
\end_inset

 for large 
\begin_inset Formula $M$
\end_inset

 then the union bound finishes the proof.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Proof
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths-basic"

\end_inset


\end_layout

\end_inset

Uniformly at random choose 
\begin_inset Formula $t_{i}$
\end_inset

 disjoint 
\begin_inset Formula $n$
\end_inset

-vertex subsets of each 
\begin_inset Formula $W_{i}$
\end_inset

.
 This gives a total of 
\begin_inset Formula $k-1$
\end_inset

 such subsets; arrange these into a sequence 
\begin_inset Formula $W_{1}',\dots,W_{k-1}'$
\end_inset

 in such a way that 
\begin_inset Formula $W_{i}'\subseteq W_{i}$
\end_inset

.
 Also uniformly at random choose 
\begin_inset Formula $n$
\end_inset

-vertex subsets 
\begin_inset Formula $X\subseteq X$
\end_inset

 and of 
\begin_inset Formula $Y'\subseteq Y$
\end_inset

.
 By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset

, 
\begin_inset Formula $\left(X',W_{1}'\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{k-1}',Y'\right)$
\end_inset

 are a.a.s.
 
\begin_inset Formula $\left(\varepsilon',\delta\right)$
\end_inset

-dense, where we can make 
\begin_inset Formula $\varepsilon'$
\end_inset

 small by choice of 
\begin_inset Formula $\varepsilon$
\end_inset

.
 We can therefore directly apply 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths-more-basic"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Proof
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset


\end_layout

\end_inset

The basic idea is to split the clusters into many random subsets, one for
 each good template, and apply 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths-basic"

\end_inset

 many times.
 (Note that there are fewer than 
\begin_inset Formula $Q^{k+1}=O\left(1\right)$
\end_inset

 different templates).
 We also need to guarantee super-regularity in what remains.
 For this, we set aside another random subset of each cluster, which we
 will not touch.
\end_layout

\begin_layout Proof
If we are successful, the special paths with good template 
\begin_inset Formula $\tau$
\end_inset

 will take some number 
\begin_inset Formula $t_{\bi}^{\tau}\left|W_{\bi}\right|$
\end_inset

 of vertices from each 
\begin_inset Formula $W_{\bi}$
\end_inset

, leaving 
\begin_inset Formula $l_{\bi}\left|W_{\bi}\right|=\left|W_{\bi}\right|-\sum_{\tau}w_{\bi}n\ge\gamma\left|W_{\bi}\right|$
\end_inset

 vertices.
 Similarly, the special paths with good template 
\begin_inset Formula $\tau$
\end_inset

 take some number 
\begin_inset Formula $s_{i}^{\tau}\left|Z_{i}\right|$
\end_inset

 of special pairs from each 
\begin_inset Formula $Z_{i}$
\end_inset

, leaving 
\begin_inset Formula $r_{i}\left|Z_{i}\right|\ge\gamma\left|Z_{i}\right|$
\end_inset

 special pairs.
\end_layout

\begin_layout Proof
Now, for some small 
\begin_inset Formula $\xi$
\end_inset

 to be determined, we want to partition each 
\begin_inset Formula $W_{\bi}$
\end_inset

 into parts 
\begin_inset Formula $W_{\bi}^{\tau}$
\end_inset

 of size at least 
\begin_inset Formula $t_{\bi}^{\tau}\left|W_{\bi}\right|/\left(1-\xi\right)$
\end_inset

, and a 
\begin_inset Quotes eld
\end_inset

leftover
\begin_inset Quotes erd
\end_inset

 part 
\begin_inset Formula $W_{\bi}'$
\end_inset

 of size 
\begin_inset Formula $\left|W_{\bi}\right|-\sum_{\tau}\left|W_{\bi}^{\tau}\right|$
\end_inset

.
 Similarly, we want to partition each 
\begin_inset Formula $Z_{i}$
\end_inset

 into parts 
\begin_inset Formula $Z_{i}^{\tau}$
\end_inset

 of size at least 
\begin_inset Formula $s_{i}^{\tau}\left|Z_{i}\right|/\left(1-\xi\right)$
\end_inset

 and a leftover part 
\begin_inset Formula $Z_{i}'$
\end_inset

.
 Let 
\begin_inset Formula $X_{\bi}^{\tau}\subseteq X_{\bi}$
\end_inset

 and 
\begin_inset Formula $X_{\bi}'\subseteq X_{\bi}$
\end_inset

 contain the special vertices in the special pairs in the 
\begin_inset Formula $Z_{\left[\bi\right]}^{\tau}$
\end_inset

 and 
\begin_inset Formula $Z_{\left[\bi\right]}'$
\end_inset

 respectively.
\end_layout

\begin_layout Proof
Choose the sizes of the 
\begin_inset Formula $W_{\bi}^{\tau}$
\end_inset

 and 
\begin_inset Formula $Z_{i}^{\tau}$
\end_inset

 such that each 
\begin_inset Formula $\left|W_{\bi}^{\tau}\right|,\left|Z_{i}^{\tau}\right|=\Omega\left(n\right)$
\end_inset

 (say 
\begin_inset Formula $\left|W_{\bi}^{\tau}\right|,\left|Z_{i}^{\tau}\right|\ge\xi an/Q^{k+1}$
\end_inset

), and also each 
\begin_inset Formula $\left|W_{\bi}'\right|\ge l_{\bi}\left|W_{\bi}\right|/\left(1+\varepsilon''/2\right)$
\end_inset

 and 
\begin_inset Formula $\left|Z_{i}'\right|\ge r_{i}\left|Z_{i}\right|/\left(1+\varepsilon''/2\right)$
\end_inset

 (note that 
\begin_inset Formula $\xi$
\end_inset

 will have to be small relative to 
\begin_inset Formula $\varepsilon''$
\end_inset

 and 
\begin_inset Formula $\gamma$
\end_inset

 for this to be possible).
 Given these part sizes choose our partitions uniformly at random.
\end_layout

\begin_layout Proof
By 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset

, for any 
\begin_inset Formula $\varepsilon'>0$
\end_inset

 we can choose 
\begin_inset Formula $\varepsilon$
\end_inset

 such that each 
\begin_inset Formula $\left(X_{\bi}^{\tau},W_{\flip{\bi}}^{\tau}\right)$
\end_inset

, 
\begin_inset Formula $\left(X_{\bi}',W_{\flip{\bi}}'\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{\bi}',W_{\flip{\bi}}'\right)$
\end_inset

 are a.a.s.
 
\begin_inset Formula $\left(\varepsilon',\delta/2\right)$
\end_inset

-super-regular, and moreover a.a.s.
 each 
\begin_inset Formula $x\in X_{\bi}$
\end_inset

 and 
\begin_inset Formula $w\in W_{\bi}$
\end_inset

 has at least 
\begin_inset Formula $\left(\delta/2\right)\left|W_{\flip{\bi}}'\right|$
\end_inset

 neighbours in 
\begin_inset Formula $W_{\flip{\bi}}'$
\end_inset

.
 We can find our desired special pairs with good template 
\begin_inset Formula $\tau$
\end_inset

 using the clusters 
\begin_inset Formula $X_{\bi}^{\tau}$
\end_inset

, 
\begin_inset Formula $W_{\bi}^{\tau}$
\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths-basic"

\end_inset

, provided 
\begin_inset Formula $\varepsilon'$
\end_inset

 is small (in the notation of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths-basic"

\end_inset

, we need 
\begin_inset Formula $\varepsilon'\le\varepsilon\left(\delta/2,\xi\right)$
\end_inset

).
\end_layout

\begin_layout Proof
After deleting these special paths, what remains in each 
\begin_inset Formula $W_{\bi}$
\end_inset

 (respectively 
\begin_inset Formula $X_{\bi}$
\end_inset

) is a superset of 
\begin_inset Formula $W_{\bi}'$
\end_inset

 with at most 
\begin_inset Formula $\left(\varepsilon''/2\right)\left|W_{\bi}'\right|$
\end_inset

 extra elements (respectively, a superset of 
\begin_inset Formula $X_{\bi}'$
\end_inset

 with 
\begin_inset Formula $\left(\varepsilon''/2\right)\left|X_{\bi}'\right|$
\end_inset

 extra elements).
 This is ensured by the conditions 
\begin_inset Formula $\left|W_{\bi}'\right|\ge l_{\bi}\left|W_{\bi}\right|/\left(1+\varepsilon''/2\right)$
\end_inset

 and 
\begin_inset Formula $\left|Z_{i}'\right|\ge r_{i}\left|Z_{i}\right|/\left(1+\varepsilon''/2\right)$
\end_inset

.
 So, if we impose that 
\begin_inset Formula $\varepsilon'\le\varepsilon''/2$
\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:robust-regular"

\end_inset

 completes the proof.
\end_layout

\begin_layout Standard
Having proved 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset

, we now just need to show that there are suitable good templates so that
 after using 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset

 to find and remove special paths with those templates we end up with 
\begin_inset Formula $2\left|W_{\bi}\right|=\left(k-1\right)\left|X_{\bi}\right|$
\end_inset

 for each 
\begin_inset Formula $\bi$
\end_inset

.
\end_layout

\begin_layout Standard
Let
\begin_inset Formula 
\[
m_{i}=\min\left\{ \left|Z_{i}\right|,\,2\left|W_{\left(i,1\right)}\right|/\left(k-1\right),\,2\left|W_{\left(i,2\right)}\right|/\left(k-1\right)\right\} .
\]

\end_inset

Impose that 
\begin_inset Formula $k$
\end_inset

 is odd; we want to leave 
\begin_inset Formula $L_{i}^{Z}:=\floor{m_{i}/2}$
\end_inset

 special pairs in each 
\begin_inset Formula $Z_{i}$
\end_inset

 and 
\begin_inset Formula $L_{i}^{W}:=\left(\left(k-1\right)/2\right)\floor{m_{i}/2}$
\end_inset

 vertices in each 
\begin_inset Formula $W_{\left(i,h\right)}$
\end_inset

, leaving a total of 
\begin_inset Formula $L=\sum_{i}\left(L_{i}^{Z}+L_{i}^{W}\right)$
\end_inset

 vertices.
 Since the variation in the 
\begin_inset Formula $s_{\bi}$
\end_inset

 is bounded independently of 
\begin_inset Formula $\varepsilon$
\end_inset

, there is some 
\begin_inset Formula $\gamma$
\end_inset

 independent of 
\begin_inset Formula $\varepsilon$
\end_inset

 such that each 
\begin_inset Formula 
\[
L_{i}^{Z}/\left|Z_{i}\right|,\;L_{i}^{W}/\left|W_{\left(i,h\right)}\right|\ge\gamma.
\]

\end_inset

We can now choose our templates almost arbitrarily.
 A convenient way to explain this rigorously is to describe our templates
 by a collection of 
\begin_inset Formula $M:=\left(n-L\right)/\left(k+1\right)$
\end_inset

 disjoint good special sequences.
 The equivalence classes of those special sequences will give our templates.
 Arbitrarily choose subsets 
\begin_inset Formula $Z_{i}'\subseteq Z_{i}$
\end_inset

 and 
\begin_inset Formula $W_{\bi}'\subseteq W_{\bi}$
\end_inset

 with 
\begin_inset Formula $\left|Z_{i}'\right|=\left|Z_{i}\right|-L_{i}^{Z}$
\end_inset

 and 
\begin_inset Formula $\left|W_{\bi}'\right|=\left|W_{\bi}\right|-L_{\left[\bi\right]}^{W}$
\end_inset

.
 Let 
\begin_inset Formula $Z'=\bigcup_{i}Z_{i}'$
\end_inset

 be the set of all special pairs in our subsets, let 
\begin_inset Formula $X'$
\end_inset

 be the set of all special vertices in those special pairs, and let 
\begin_inset Formula $W'=\bigcup_{\bi}W_{\bi}'$
\end_inset

 be the set of free vertices in our subsets.
 Note that 
\begin_inset Formula $M=\left|Z'\right|=2\left|X'\right|=\left(k-1\right)\left|W'\right|$
\end_inset

.
 Since the variation between the 
\begin_inset Formula $\left|W_{\bi}\right|$
\end_inset

 and 
\begin_inset Formula $\left(k-1\right)\left|Z_{i}\right|$
\end_inset

 is bounded, for large 
\begin_inset Formula $k$
\end_inset

 we have 
\begin_inset Formula 
\[
\left|W_{\bi}'\right|=\left|W_{\bi}\right|-\left(\left(k-1\right)/2\right)\floor{m_{\left[\bi\right]}/2}\ge\left|Z_{\left[\bi\right]}\right|-\floor{m_{\left[\bi\right]}/2}=\left|Z_{\left[\bi\right]}\right|
\]

\end_inset

for each 
\begin_inset Formula $\bi$
\end_inset

.
 We now start filling our special sequences with the vertices in 
\begin_inset Formula $X'\cup W'$
\end_inset

 (note 
\begin_inset Formula $\left|X'\cup W'\right|=\left(k+1\right)M$
\end_inset

, as required).
 For each special sequence we choose its first and last vertex to be the
 vertices of a special pair in 
\begin_inset Formula $Z'$
\end_inset

 (say we choose 
\begin_inset Formula $\left\{ x,y\right\} \in Z_{i}'$
\end_inset

, and we choose 
\begin_inset Formula $x\in X_{\left(i,1\right)}$
\end_inset

 and 
\begin_inset Formula $y\in X_{\left(i,2\right)}$
\end_inset

 to be the first and last vertices in the special sequence respectively).
 Then we choose arbitrary vertices from 
\begin_inset Formula $W_{\left(i,1\right)}'$
\end_inset

 and 
\begin_inset Formula $W_{\left(i,2\right)}'$
\end_inset

 to be the second and second-last vertices in the sequence (in our case,
 a vertex from 
\begin_inset Formula $W_{\left(i,2\right)}'$
\end_inset

 should be second and a vertex from 
\begin_inset Formula $W_{\left(i,1\right)}'$
\end_inset

 should be second-last).
 After we have determined the first, second, second last and last vertices
 of every sequence, we can use the remaining 
\begin_inset Formula $\left(k-1\right)M$
\end_inset

 vertices in 
\begin_inset Formula $W'$
\end_inset

 to complete our special sequences arbitrarily.
\end_layout

\begin_layout Standard
As outlined, these special sequences yield templates with the desired properties.
 We can now forget about our specific special sequences and the sets 
\begin_inset Formula $W'$
\end_inset

, 
\begin_inset Formula $X'$
\end_inset

 and 
\begin_inset Formula $Z'$
\end_inset

; we introduced these only to explain how one can easily choose the templates.
\end_layout

\begin_layout Remark
If we are careful, instead of choosing our templates arbitrarily we can
 strategically choose them in such a way that each cluster is only involved
 in a few different templates.
 This means that in the proof of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset

, we do not need to divide each cluster into nearly as many as 
\begin_inset Formula $Q^{k+1}$
\end_inset

 subsets.
 This would mean that we can avoid the use of the powerful results of 
\begin_inset CommandInset citation
LatexCommand cite
key "GKRS07"

\end_inset

 and make do with a simpler and weaker variant of 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:random-preserves-superregular"

\end_inset

.
\end_layout

\begin_layout Standard
We now apply 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:adjusting-paths"

\end_inset

 using our templates and the random edges in 
\begin_inset Formula $\R_{4}$
\end_inset

, and remove the special paths that we find.
 Update the 
\begin_inset Formula $W_{\bi}$
\end_inset

, 
\begin_inset Formula $X_{\bi}$
\end_inset

 and 
\begin_inset Formula $Z_{i}$
\end_inset

; we finally have 
\begin_inset Formula $2\left|W_{\bi}\right|=\left(k-1\right)\floor{m_{\left[\bi\right]}/2}=\left(k-1\right)\left|X_{\bi}\right|$
\end_inset

 for each 
\begin_inset Formula $\bi$
\end_inset

, and each 
\begin_inset Formula $\left(X_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 and 
\begin_inset Formula $\left(W_{\bi},W_{\flip{\bi}}\right)$
\end_inset

 are 
\begin_inset Formula $\left(\varepsilon_{4},\delta_{4}\right)$
\end_inset

-super-regular, where 
\begin_inset Formula $\delta_{4}=\delta_{3}/4$
\end_inset

 and 
\begin_inset Formula $\varepsilon_{4}$
\end_inset

 can be arbitrarily small respective to 
\begin_inset Formula $\delta_{4}$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Completing the embedding with the blow-up lemma
\begin_inset CommandInset label
LatexCommand label
name "sub:blow-up"

\end_inset


\end_layout

\begin_layout Standard
We have now finished with the edges in 
\begin_inset Formula $\R$
\end_inset

; what remains is sufficiently well-structured that we can embed the remaining
 paths using the blow-up lemma and the super-regularity in 
\begin_inset Formula $\G$
\end_inset

.
 We first give a statement of the blow-up lemma.
\end_layout

\begin_layout Lemma
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Blow-up Lemma 
\begin_inset CommandInset citation
LatexCommand cite
key "KSS97"

\end_inset


\end_layout

\end_inset

Let 
\begin_inset Formula $\delta,\Delta>0$
\end_inset

 and 
\begin_inset Formula $r\in\NN$
\end_inset

.
 There is 
\begin_inset Formula $\varepsilon=\varepsilon\left(r,\delta,\Delta\right)$
\end_inset

 such that the following holds.
\end_layout

\begin_layout Lemma
Let 
\begin_inset Formula $C$
\end_inset

 be a graph on the vertex set 
\begin_inset Formula $\range r$
\end_inset

, and let 
\begin_inset Formula $n_{1},\dots,n_{r}\in\NN^{+}$
\end_inset

.
 Let 
\begin_inset Formula $V_{1},\dots,V_{r}$
\end_inset

 be pairwise disjoint sets of sizes 
\begin_inset Formula $n_{1},\dots,n_{r}$
\end_inset

.
 We construct two graphs on the vertex set 
\begin_inset Formula $V=\bigcup_{i=1}^{r}V_{i}$
\end_inset

 as follows.
 The first graph 
\begin_inset Formula $b_{n_{1},\dots,n_{r}}\left(C\right)$
\end_inset

 (the 
\begin_inset Quotes eld
\end_inset

complete blow-up
\begin_inset Quotes erd
\end_inset

) is obtained by putting the complete bipartite graph between 
\begin_inset Formula $V_{i}$
\end_inset

 and 
\begin_inset Formula $V_{j}$
\end_inset

 whenever 
\begin_inset Formula $\left\{ i,j\right\} $
\end_inset

 is an edge in 
\begin_inset Formula $C$
\end_inset

.
 The second graph 
\begin_inset Formula $B\subseteq b_{n_{1},\dots,n_{r}}\left(C\right)$
\end_inset

 (a 
\begin_inset Quotes eld
\end_inset

super-regular blow-up
\begin_inset Quotes erd
\end_inset

) is obtained by putting edges between each such 
\begin_inset Formula $V_{i}$
\end_inset

 and 
\begin_inset Formula $V_{j}$
\end_inset

 such that 
\begin_inset Formula $\left(V_{i},V_{j}\right)$
\end_inset

 is an 
\begin_inset Formula $\left(\varepsilon,\delta\right)$
\end_inset

-super-regular pair.
\end_layout

\begin_layout Lemma
If a graph 
\begin_inset Formula $H$
\end_inset

 with maximum degree bounded by 
\begin_inset Formula $\Delta$
\end_inset

 can be embedded into 
\begin_inset Formula $b\left(C\right)$
\end_inset

, then it can be embedded into 
\begin_inset Formula $B$
\end_inset

.
\end_layout

\begin_layout Standard
Now we describe the setup to apply the blow-up lemma.
 For each 
\begin_inset Formula $i\in\range q$
\end_inset

, define 
\begin_inset Formula 
\[
S_{i}^{0}=X_{\left(i,1\right)},\;S_{i}^{1}=W_{\left(i,2\right)},\;S_{i}^{2}=W_{\left(i,1\right)},\;S_{i}^{3}=X_{\left(i,2\right)}.
\]

\end_inset

We construct an auxiliary graph 
\begin_inset Formula $G_{i}$
\end_inset

 as follows.
 Start with the subgraph of 
\begin_inset Formula $\G$
\end_inset

 induced by 
\begin_inset Formula $S_{i}^{0}\cup S_{i}^{1}\cup S_{i}^{2}\cup S_{i}^{3}$
\end_inset

, and remove every edge not between some 
\begin_inset Formula $S_{i}^{\ell}$
\end_inset

 and 
\begin_inset Formula $S_{i}^{\ell+1}$
\end_inset

.
 Identify the two vertices in each special pair to get a super-regular 
\begin_inset Quotes eld
\end_inset

cluster-cycle
\begin_inset Quotes erd
\end_inset

 with 3 clusters 
\begin_inset Formula $S_{i}^{Z}$
\end_inset

, 
\begin_inset Formula $S_{i}^{1}$
\end_inset

 and 
\begin_inset Formula $S_{i}^{2}$
\end_inset

.
 To be precise, the elements of 
\begin_inset Formula $S_{i}^{Z}$
\end_inset

 are the 
\begin_inset Formula $\left|Z_{i}\right|$
\end_inset

 (ordered!) special pairs 
\begin_inset Formula $\left(\x_{1},\x_{2}\right)\in X_{\left(i,1\right)}\times X_{\left(i,2\right)}$
\end_inset

; such a special pair is adjacent to 
\begin_inset Formula $v\in S_{i}^{\h}$
\end_inset

 if 
\begin_inset Formula $\x_{\h}$
\end_inset

 is adjacent to 
\begin_inset Formula $v$
\end_inset

.
 The purpose of defining 
\begin_inset Formula $G_{i}$
\end_inset

 is that a cycle containing exactly one vertex 
\begin_inset Formula $\left(\x,\y\right)$
\end_inset

 from 
\begin_inset Formula $S_{i}^{Z}$
\end_inset

 corresponds to a special path connecting 
\begin_inset Formula $\x$
\end_inset

 and 
\begin_inset Formula $\y$
\end_inset

.
 See 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:cluster-paths"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{center}
\end_layout

\begin_layout Plain Layout


\backslash
begin{tikzpicture}[scale=0.8]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
sqrt{1.41421356237}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rh{1}
\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rw{3}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
draw (0,-
\backslash
rh) -| (
\backslash
rw,
\backslash
rh) -| cycle
\end_layout

\begin_layout Plain Layout

      (0,0) -- (
\backslash
rw,0);
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
coordinate (xb11) at (
\backslash
rw-0.25,-
\backslash
rh);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (xb12) at (0.25,-
\backslash
rh);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (xb21) at (0.25,
\backslash
rh);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (xb22) at (
\backslash
rw-0.25,
\backslash
rh);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (xc1) at (
\backslash
rw/2,-
\backslash
rh);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (xc2) at (
\backslash
rw/2,
\backslash
rh);
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
node at (
\backslash
rw/2,
\backslash
rh/2) {$S_0=X_{(i,1)}$};
\end_layout

\begin_layout Plain Layout


\backslash
node at (
\backslash
rw/2,-
\backslash
rh/2) {$S_3=X_{(i,2)}$};
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rw{5}
\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rsx{6}
\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rsy{3.5}
\end_layout

\begin_layout Plain Layout


\backslash
FPeval{
\backslash
rshifty2}{
\backslash
rsy*2}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rx{6}
\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rr{30}
\end_layout

\begin_layout Plain Layout


\backslash
FPeval{
\backslash
rrot2}{
\backslash
rr+180}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
begin{scope}[shift={(
\backslash
rsx,-
\backslash
rsy)},rotate=
\backslash
rrot2]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rn{1}
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn1) at (-
\backslash
rw/2,0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn2) at (-
\backslash
rw/2,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn3) at (
\backslash
rw/2,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn4) at (
\backslash
rw/2,0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
draw (r
\backslash
rn1) -- (r
\backslash
rn2) -- (r
\backslash
rn3) -- (r
\backslash
rn4) -- (r
\backslash
rn1);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p1) at (-
\backslash
rw*0.3,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p2) at (-
\backslash
rw*0.15,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p3) at (0,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p4) at (
\backslash
rw*0.15,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p5) at (
\backslash
rw*0.3,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}b1) at (-
\backslash
rw/2+0.5,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}b2) at (
\backslash
rw/2-0.5,-0.5){};
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
fill [opacity=0.15] (xb
\backslash
rn1) -- (r{
\backslash
rn}b1) -- (r{
\backslash
rn}b2) -- (xb
\backslash
rn2) -- cycle;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
begin{scope}[rotate=-
\backslash
rrot2]
\end_layout

\begin_layout Plain Layout


\backslash
begin{scope}[shift={(0,
\backslash
rshifty2)},rotate=-
\backslash
rr]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
def
\backslash
rn{2}
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn1) at (-
\backslash
rw/2,0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn2) at (-
\backslash
rw/2,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn3) at (
\backslash
rw/2,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r
\backslash
rn4) at (
\backslash
rw/2,0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
draw (r
\backslash
rn1) -- (r
\backslash
rn2) -- (r
\backslash
rn3) -- (r
\backslash
rn4) -- (r
\backslash
rn1);
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p1) at (-
\backslash
rw*0.3,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p2) at (-
\backslash
rw*0.15,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p3) at (0,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p4) at (
\backslash
rw*0.15,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}p5) at (
\backslash
rw*0.3,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}b1) at (-
\backslash
rw/2+0.5,-0.5){};
\end_layout

\begin_layout Plain Layout


\backslash
coordinate (r{
\backslash
rn}b2) at (
\backslash
rw/2-0.5,-0.5){};
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
fill [opacity=0.15] (xb
\backslash
rn1) -- (r{
\backslash
rn}b1) -- (r{
\backslash
rn}b2) -- (xb
\backslash
rn2) -- cycle;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
fill [opacity=0.15] (r{1}b2) -- (r{2}b1) -- (r{2}b2) -- (r{1}b1) -- cycle;
\end_layout

\begin_layout Plain Layout


\backslash
draw (xc1) -- (r{1}p5)
\end_layout

\begin_layout Plain Layout

      (r{1}p5)-- (r{2}p2)
\end_layout

\begin_layout Plain Layout

      (r{2}p2) -- (r{1}p3)
\end_layout

\begin_layout Plain Layout

      (r{1}p3) -- (r{2}p3)
\end_layout

\begin_layout Plain Layout

      (r{2}p3) -- (r{1}p4)
\end_layout

\begin_layout Plain Layout

      (r{1}p4) -- (r{2}p1)
\end_layout

\begin_layout Plain Layout

      (r{2}p1) -- (xc2);
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{scope}
\end_layout

\begin_layout Plain Layout


\backslash
end{scope}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{scope}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

%}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
node[rotate=
\backslash
rr] at (
\backslash
rsx,-
\backslash
rsy) {$S_2=W_{(i,1)}$};
\end_layout

\begin_layout Plain Layout


\backslash
node[rotate=-
\backslash
rr] at (
\backslash
rsx,
\backslash
rsy) {$S_1=W_{(i,2)}$};
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
end{center}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:cluster-paths"

\end_inset

An example special path is shown, for 
\begin_inset Formula $k=7$
\end_inset

.
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $n_{i}=\left|S_{i}^{Z}\right|=\left|Z_{i}\right|$
\end_inset

.
 Note that 
\begin_inset Formula $G_{i}$
\end_inset

 is a 
\begin_inset Formula $\left(\varepsilon_{4},\delta_{4}\right)$
\end_inset

-super-regular blow-up of a 3-cycle 
\begin_inset Formula $C_{3}$
\end_inset

, with part sizes 
\begin_inset Formula $n_{i}$
\end_inset

, 
\begin_inset Formula $\left(\left(k-1\right)/2\right)n_{i}$
\end_inset

 and 
\begin_inset Formula $\left(\left(k-1\right)/2\right)n_{i}$
\end_inset

.
 The corresponding complete blow-up 
\begin_inset Formula $b\left(C_{3}\right)$
\end_inset

 contains 
\begin_inset Formula $n_{i}$
\end_inset

 disjoint 
\begin_inset Formula $k$
\end_inset

-cycles (each has a vertex in 
\begin_inset Formula $S_{i}^{Z}$
\end_inset

 and its other 
\begin_inset Formula $k-1$
\end_inset

 vertices alternate between 
\begin_inset Formula $S_{i}^{1}$
\end_inset

 and 
\begin_inset Formula $S_{i}^{2}$
\end_inset

).
 By the blow-up lemma, 
\begin_inset Formula $G_{i}$
\end_inset

 also contains 
\begin_inset Formula $n_{i}$
\end_inset

 disjoint 
\begin_inset Formula $k$
\end_inset

-cycles.
 Since 
\begin_inset Formula $k$
\end_inset

 is odd, each of these must use at least one vertex from 
\begin_inset Formula $S_{i}^{Z}$
\end_inset

, but since 
\begin_inset Formula $\left|S_{i}^{Z}\right|=n_{i}$
\end_inset

, each cycle must then use exactly one vertex from 
\begin_inset Formula $S_{i}^{Z}$
\end_inset

.
 These cycles correspond to special paths which complete our embedding of
 
\begin_inset Formula $\T$
\end_inset

.
\end_layout

\begin_layout Section
Concluding Remarks
\end_layout

\begin_layout Standard
We have proved that any given bounded-degree spanning tree typically appears
 when a linear number of random edges are added to a dense graph.
 There are a few interesting questions that remain open.
 Most prominent is the question of embedding more general kinds of spanning
 subgraphs into randomly perturbed graphs.
 It would be particularly interesting if the general result of 
\begin_inset CommandInset citation
LatexCommand cite
key "BST09"

\end_inset

 (concerning arbitrary spanning graphs with bounded degree and low bandwidth)
 could be adapted to this setting.
 It is also possible that our use of Szemer
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
'
\end_layout

\end_inset

edi's regularity lemma could be avoided, thus drastically improving the
 constants 
\begin_inset Formula $\c\left(\a\right)$
\end_inset

 and perhaps allowing us to say something about random perturbations of
 graphs which have slightly sublinear minimum degree.
\end_layout

\begin_layout Standard
\noindent

\series bold
Acknowledgement.

\series default
 Parts of this work were carried out when the first author visited the Institute
 for Mathematical Research (FIM) of ETH Zurich, and also when the third
 author visited the School of Mathematical Sciences of Tel Aviv University,
 Israel.
 We would like to thank both institutions for their hospitality and for
 creating a stimulating research environment.
\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "references"
options "amsplain_initials"

\end_inset


\end_layout

\end_body
\end_document
